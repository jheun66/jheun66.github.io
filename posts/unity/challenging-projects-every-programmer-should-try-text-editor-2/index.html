<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Challenging projects every programmer should try - Text Editor(2) - In progress
    
  </title>

  <meta name="description" content="ì´ì „ í¬ìŠ¤íŒ… Challenging projects every programmer should try - Text Editor(1)">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
  
  <link rel="stylesheet" href="/assets/highlight.css">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/">
  <link rel="alternate" type="application/rss+xml" title="In progress" href="/feed.xml">

  <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
<script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <style type="text/css">
    a.comment-link:link {text-decoration: none; color:rgb(170, 170, 170)} 
    a.comment-link:visited {text-decoration: none; color:rgb(170, 170, 170)} 
    a.comment-link:hover {text-decoration: underline;}
  </style>
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Challenging projects every programmer should try - Text Editor(2) | In progress</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Challenging projects every programmer should try - Text Editor(2)" />
<meta name="author" content="Eun JongHyeok" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ì´ì „ í¬ìŠ¤íŒ… Challenging projects every programmer should try - Text Editor(1)" />
<meta property="og:description" content="ì´ì „ í¬ìŠ¤íŒ… Challenging projects every programmer should try - Text Editor(1)" />
<link rel="canonical" href="https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/" />
<meta property="og:url" content="https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/" />
<meta property="og:site_name" content="In progress" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-04-22T15:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Challenging projects every programmer should try - Text Editor(2)" />
<meta name="google-site-verification" content="tbEwkoz_olC5QjXqaH3xRQX19VegCM80JTKhBa3iSx8" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Eun JongHyeok"},"dateModified":"2024-04-22T15:00:00+00:00","datePublished":"2024-04-22T15:00:00+00:00","description":"ì´ì „ í¬ìŠ¤íŒ… Challenging projects every programmer should try - Text Editor(1)","headline":"Challenging projects every programmer should try - Text Editor(2)","mainEntityOfPage":{"@type":"WebPage","@id":"https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/"},"url":"https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/"}</script>
<!-- End Jekyll SEO tag -->


  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8954355499146518"
     crossorigin="anonymous"></script>
  <script async src="https://fundingchoicesmessages.google.com/i/pub-8954355499146518?ers=1" nonce="vIYNAgythFLTbocmvIWE6A"></script><script nonce="vIYNAgythFLTbocmvIWE6A">(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>
</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">In progress</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/category">Category</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->



<header class="masthead" style="background-color: #3F37C9;">

  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <div class="post-heading">
          <h1>Challenging projects every programmer should try - Text Editor(2)</h1>
          
          <span class="meta">Posted by Eun JongHyeok on April 22, 2024
          </span>
        </div>
      </div>
    </div>
  </div>
</header>

<div class="container">
  <div class="row min-vh-100 flex-column flex-lg-row">
    <div class="col-lg-8 col-md-10 mx-auto">
  
      <ol id="toc" class="table-of-contents">
<li class="toc-entry toc-h1"><a href="#ì´ì „-í¬ìŠ¤íŒ…">ì´ì „ í¬ìŠ¤íŒ…</a></li>
<li class="toc-entry toc-h1"><a href="#ë¬¸ìì—´-ì¶œë ¥í•˜ê¸°">ë¬¸ìì—´ ì¶œë ¥í•˜ê¸°</a>
<ol class="table-of-contents-sublist-class">
<li class="toc-entry toc-h2"><a href="#glyph-table-ì´í•´í•˜ê¸°">Glyph Table ì´í•´í•˜ê¸°</a></li>
<li class="toc-entry toc-h2"><a href="#glyph-adjustment-table-ì´í•´í•˜ê¸°">Glyph Adjustment Table ì´í•´í•˜ê¸°</a></li>
<li class="toc-entry toc-h2"><a href="#ë¼ì¸ê°„ì˜-ê°„ê²©">ë¼ì¸ê°„ì˜ ê°„ê²©</a></li>
</ol>
</li>
<li class="toc-entry toc-h1"><a href="#í™”ë©´-í¬ê¸°-ë§ì¶”ê¸°">í™”ë©´ í¬ê¸° ë§ì¶”ê¸°</a>
<ol class="table-of-contents-sublist-class">
<li class="toc-entry toc-h2"><a href="#ì‹¤í–‰í™”ë©´">ì‹¤í–‰í™”ë©´</a></li>
</ol>
</li>
<li class="toc-entry toc-h1"><a href="#ì „ì²´-ì½”ë“œ">ì „ì²´ ì½”ë“œ</a></li>
<li class="toc-entry toc-h1"><a href="#next">Next</a></li>
</ol><h1 id="ì´ì „-í¬ìŠ¤íŒ…">
<a class="anchor" href="#%EC%9D%B4%EC%A0%84-%ED%8F%AC%EC%8A%A4%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì´ì „ í¬ìŠ¤íŒ…</h1>
<p><a href="/posts/unity/challenging-projects-every-programmer-should-try-text-editor-1/">Challenging projects every programmer should try - Text Editor(1)</a></p>

<h1 id="ë¬¸ìì—´-ì¶œë ¥í•˜ê¸°">
<a class="anchor" href="#%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>ë¬¸ìì—´ ì¶œë ¥í•˜ê¸°</h1>
<p>ì´ë²ˆì—ëŠ” ë¬¸ìì—´ì„ ì¶œë ¥ì— ë„ì „í•´ë´…ì‹œë‹¤.<br>
ì˜ˆì‹œë‹µê²Œ <code class="language-plaintext highlighter-rouge">"Hello, World!"</code>ë¥¼ ì¶œë ¥í•˜ë ¤ í•˜ëŠ”ë°ìš”.<br>
ë¬¸ìì—´ì„ ì¶œë ¥í•˜ê¸° ìœ„í•´ì„œëŠ” ê¸€ì ì‚¬ì´ ê°„ê²©ë¿ë§Œ ì•„ë‹ˆë¼ ê° ê¸€ìë“¤ì´ ê°™ì€ ë² ì´ìŠ¤ ë¼ì¸ì„ ê¸°ì¤€ìœ¼ë¡œ ê·¸ë ¤ì§€ê³  ìˆë‹¤ëŠ” ì ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.<br>
ì´ë•Œ Glyph Tableì— ìˆëŠ” ì •ë³´ë“¤ì„ í™œìš©í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h2 id="glyph-table-ì´í•´í•˜ê¸°">
<a class="anchor" href="#glyph-table-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Glyph Table ì´í•´í•˜ê¸°</h2>
<p>í°íŠ¸ ì• ì…‹ ì•ˆì— ìˆëŠ” Glyph Tableì—ì„œ ì²«ë²ˆì§¸ ë¬¸ì <code class="language-plaintext highlighter-rouge">"</code>ë¥¼ ì°¾ì•„ë´…ì‹œë‹¤.<br>
<img src="/img/posts/unity/018.png" alt="018" width="450" class="center">
Glyph Metricsì— <code class="language-plaintext highlighter-rouge">BX</code>, <code class="language-plaintext highlighter-rouge">BY</code>, <code class="language-plaintext highlighter-rouge">AD</code>ê°€ ìˆëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
GlyphMetricsì˜ êµ¬ì¡°ì²´ì—ì„œ í•´ë‹¹ í”„ë¡œí¼í‹°ê°€ ì–´ë–¤ ìš©ë„ì¸ì§€ ì„¤ëª…ì´ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td>
<td class="rouge-code"><pre><span class="k">public</span> <span class="k">struct</span> <span class="nc">GlyphMetrics</span> <span class="p">:</span> <span class="n">IEquatable</span><span class="p">&lt;</span><span class="n">GlyphMetrics</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="p">...</span>

    <span class="c1">//</span>
    <span class="c1">// ìš”ì•½:</span>
    <span class="c1">//     The horizontal distance from the current drawing position (origin) relative to</span>
    <span class="c1">//     the element's left bounding box edge (bbox).</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">horizontalBearingX</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//</span>
    <span class="c1">// ìš”ì•½:</span>
    <span class="c1">//     The vertical distance from the current baseline relative to the element's top</span>
    <span class="c1">//     bounding box edge (bbox).</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">horizontalBearingY</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//</span>
    <span class="c1">// ìš”ì•½:</span>
    <span class="c1">//     The horizontal distance to increase (left to right) or decrease (right to left)</span>
    <span class="c1">//     the drawing position relative to the origin of the text element.</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">horizontalAdvance</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="p">...</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>BXëŠ” ë°”ìš´ë”© ë°•ìŠ¤ ì™¼ìª½ ëª¨ì„œë¦¬ì—ì„œ ìˆ˜í‰ë°©í–¥ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ë–¨ì–´ì ¸ìˆëƒë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, ì¢Œì¸¡ ì—¬ë°±ì´ë¼ ìƒê°í•©ì‹œë‹¤.<br>
BYëŠ” ë°”ìš´ë”© ë°•ìŠ¤ ìƒë‹¨ ëª¨ì„œë¦¬ì—ì„œ ë² ì´ìŠ¤ë¼ì¸ê¹Œì§€ ìˆ˜ì§ë°©í–¥ìœ¼ë¡œ ì–¼ë§ˆë‚˜ ë–¨ì–´ì ¸ìˆëƒë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, ìƒë‹¨ ë†’ì´ë¼ ìƒê°í•©ì‹œë‹¤.<br>
ADëŠ” í…ìŠ¤íŠ¸ê°€ ê·¸ë ¤ì§€ê³  ìˆ˜í‰ë°©í–¥ìœ¼ë¡œ ì–¼ë§ˆë§Œí¼ ì´ë™í•´ì•¼í•˜ëŠ”ì§€ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰ ë‹¤ìŒ ê¸€ìì™€ì˜ ìˆ˜í‰ê±°ë¦¬ë¼ ìƒê°í•©ì‹œë‹¤.</p>

<p><img src="https://freetype.org/freetype2/docs/glyphs/glyph-metrics-1.svg" alt="019" width="400" class="center">
<img src="https://freetype.org/freetype2/docs/glyphs/glyph-metrics-3.svg" alt="020" width="400" class="center">
<a href="https://freetype.org/freetype2/docs/glyphs/glyphs-3.html">ì¶œì²˜</a></p>

<p>ìœ„ ì´ë¯¸ì§€ëŠ” êµ¬ê¸€ë§ í–ˆì„ ë•Œ ê°€ì¥ ì¢‹ì€ ì˜ˆì‹œë¼ ìƒê°ë˜ì–´ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.<br>
í¬ìŠ¤íŒ…ì„ ë‹¤í•˜ê³  ë‚˜ì¤‘ì— ì•Œê²Œëœ ë‚´ìš©ì´ì§€ë§Œ TMP_TextInfoDebugTool.csë¥¼ í†µí•´ì„œë„ í™•ì¸í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œë˜ì—ˆìŠµë‹ˆë‹¤.ğŸ˜­</p>

<p>ì ê¹ ì´ì „ í¬ìŠ¤íŠ¸ì˜ ì½”ë“œë¥¼ ì‚´í´ë´…ì‹œë‹¤.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">glyphRect</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">glyphRect</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>ì´ì „ì—ëŠ” ì •ë§ ë‹¨ìˆœí•˜ê²Œ ì¢Œì¸¡í•˜ë‹¨ì„ (0, 0)ìœ¼ë¡œ ìƒê°í–ˆì§€ë§Œ ì´ì œëŠ” <code class="language-plaintext highlighter-rouge">BX</code>, <code class="language-plaintext highlighter-rouge">BY</code>ë„ ê°™ì´ ê³ ë ¤í•´ì¤ì‹œë‹¤.<br>
ì¢Œí‘œë¥¼ ë‹¤ì‹œ ì§€ì •í•˜ë©´ ë‹¤ìŒê³¼ ê°™ì´ ë°”ê¿€ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">width</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">height</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">bx</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingX</span><span class="p">;</span>
    <span class="kt">var</span> <span class="k">by</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingY</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">AD</code>ëŠ” ë‹¨ìˆœí•˜ê²Œ ë¬¸ìì˜ ë¡œì»¬ í¬ì§€ì…˜ë§Œ ì´ë™í•˜ëŠ” ê²ƒìœ¼ë¡œ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td>
<td class="rouge-code"><pre><span class="k">void</span> <span class="nf">RenderCharacter</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posX</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="k">out</span> <span class="n">TMP_Character</span> <span class="n">tmpCharacter</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">glyph</span> <span class="p">=</span> <span class="n">tmpCharacter</span><span class="p">.</span><span class="n">glyph</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">mesh</span> <span class="p">=</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">glyph</span><span class="p">);</span>
        <span class="kt">var</span> <span class="n">charObject</span> <span class="p">=</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

        <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">localPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">posX</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> 
        <span class="c1">// ë‹¤ìŒ ê¸€ìì˜ ì‹œì‘ ìœ„ì¹˜</span>
        <span class="n">posX</span> <span class="p">+=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalAdvance</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"LookupTableì— ì—†ëŠ” ë¬¸ì : </span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<h2 id="glyph-adjustment-table-ì´í•´í•˜ê¸°">
<a class="anchor" href="#glyph-adjustment-table-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Glyph Adjustment Table ì´í•´í•˜ê¸°</h2>
<p>Glyph Tableë§Œ ì ìš©í•´ë„ ë¬¸ì œê°€ ì—†ì§€ë§Œ ê¸°ì™• ì‹œì‘í•œê±° Adjustment Tableë„ ì ìš©í•´ë´…ì‹œë‹¤.<br>
ì˜ˆë¬¸ â€œHello, World!â€ì—ì„œ â€˜Wâ€™ì™€ â€˜oâ€™ë¥¼ ì°¾ì•„ë³´ë©´<br>
ì•„ë˜ì™€ ê°™ì´ <code class="language-plaintext highlighter-rouge">AX</code>ê°€ ì§€ì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
<img src="/img/posts/unity/021.png" alt="021" width="450" class="center"></p>

<p>ì™¼ìª½ì— ìˆëŠ” AXì˜ ê°’ì€ ê¸€ìì‚¬ì´ì˜ ê°„ê²©ì„ í•´ë‹¹ ê°’ë§Œí¼ ì¡°ì ˆí•˜ë¼ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.<br>
í•´ë‹¹ ê°’ì€ ì•„ë˜ì™€ ê°™ì´ êµ¬í•´ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="kt">float</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="kt">char</span> <span class="n">prevChar</span><span class="p">,</span> <span class="kt">char</span> <span class="n">nextChar</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">previousGlyphIndex</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">[</span><span class="n">prevChar</span><span class="p">].</span><span class="n">glyphIndex</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">currentGlyphIndex</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">[</span><span class="n">nextChar</span><span class="p">].</span><span class="n">glyphIndex</span><span class="p">;</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="k">record</span> <span class="nc">in</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">fontFeatureTable</span><span class="p">.</span><span class="n">glyphPairAdjustmentRecords</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">record</span><span class="err">.</span><span class="nc">firstAdjustmentRecord</span><span class="p">.</span><span class="n">glyphIndex</span> <span class="p">==</span> <span class="n">previousGlyphIndex</span> 
            <span class="p">&amp;&amp;</span> <span class="k">record</span><span class="err">.</span><span class="nc">secondAdjustmentRecord</span><span class="p">.</span><span class="n">glyphIndex</span> <span class="p">==</span> <span class="n">currentGlyphIndex</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">record</span><span class="err">.</span><span class="nc">firstAdjustmentRecord</span><span class="p">.</span><span class="n">glyphValueRecord</span><span class="p">.</span><span class="n">xAdvance</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="m">0.0f</span><span class="p">;</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>ìš°ì„  ë¼ì¸ì— ë¬¸ìì—´ì„ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜ëŠ” ê°„ë‹¨í•˜ê²Œ ë§Œë“¤ì–´ë´…ë‹ˆë‹¤.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td>
<td class="rouge-code"><pre><span class="k">void</span> <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">posX</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">ch</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="n">posX</span> <span class="p">+=</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">],</span> <span class="n">ch</span><span class="p">);</span>

        <span class="nf">RenderCharacter</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posX</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
<h2 id="ë¼ì¸ê°„ì˜-ê°„ê²©">
<a class="anchor" href="#%EB%9D%BC%EC%9D%B8%EA%B0%84%EC%9D%98-%EA%B0%84%EA%B2%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>ë¼ì¸ê°„ì˜ ê°„ê²©</h2>
<p>ë¼ì¸ê°„ì˜ ê°„ê²©ì—ëŠ” Face Infoì˜ Line Height ì†ì„±ì„ ì ìš©í•  ê²ë‹ˆë‹¤.</p>

<p><img src="/img/posts/unity/022.png" alt="022" width="450" class="center"></p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td>
<td class="rouge-code"><pre><span class="k">void</span> <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineNum</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">posX</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">posY</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span> <span class="p">*</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">lineHeight</span> <span class="p">*</span> <span class="p">(</span><span class="n">lineNum</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">ch</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="n">posX</span> <span class="p">+=</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">],</span> <span class="n">ch</span><span class="p">);</span>

        <span class="nf">RenderCharacter</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posY</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">void</span> <span class="nf">RenderCharacter</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posY</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// charëŠ” uintë¡œ ì•”ì‹œì  í˜•ë³€í™˜</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="k">out</span> <span class="n">TMP_Character</span> <span class="n">tmpCharacter</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">glyph</span> <span class="p">=</span> <span class="n">tmpCharacter</span><span class="p">.</span><span class="n">glyph</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">mesh</span> <span class="p">=</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">glyph</span><span class="p">);</span>
        <span class="kt">var</span> <span class="n">charObject</span> <span class="p">=</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

        <span class="c1">// ë¬¸ìì˜ ìœ„ì¹˜ë¥¼ ì¡°ì •</span>
        <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">localPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">posX</span><span class="p">,</span> <span class="n">posY</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="c1">// ë‹¤ìŒ ê¸€ìì˜ ì‹œì‘ ìœ„ì¹˜</span>
        <span class="n">posX</span> <span class="p">+=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalAdvance</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"LookupTableì— ì—†ëŠ” ë¬¸ì : </span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>posYë¥¼ line ë†’ì´ë§Œí¼ ë‚®ì¶°ì„œ ê·¸ë ¤ì£¼ë©´ ë©ë‹ˆë‹¤.</p>

<h1 id="í™”ë©´-í¬ê¸°-ë§ì¶”ê¸°">
<a class="anchor" href="#%ED%99%94%EB%A9%B4-%ED%81%AC%EA%B8%B0-%EB%A7%9E%EC%B6%94%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>í™”ë©´ í¬ê¸° ë§ì¶”ê¸°</h1>
<p>í˜„ì¬ vertice ì‚¬ì´ì¦ˆë¥¼ ì»¤ì„œ ì¹´ë©”ë¼ì— ë‹¤ ì•ˆë“¤ì–´ì˜µë‹ˆë‹¤.<br>
ìš°ì„  ì¹´ë©”ë¼ ì„¸íŒ…ì„ orthographicìœ¼ë¡œ ë°”ê¾¸ê³  sizeëŠ” 10 ì •ë„ë¡œ ë§ì¶¥ë‹ˆë‹¤.</p>

<p><img src="/img/posts/unity/023.png" alt="023" width="450" class="center"></p>

<p>fontScale ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ë¦¬ì‚¬ì´ì§•ì— ì‚¬ìš©í•©ë‹ˆë‹¤.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td>
<td class="rouge-code"><pre><span class="kt">float</span> <span class="n">fontScale</span> <span class="p">=</span> <span class="m">1f</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">float</span> <span class="n">defaultFontSize</span> <span class="p">=</span> <span class="m">12f</span><span class="p">;</span>
<span class="k">private</span> <span class="kt">float</span> <span class="n">scale</span> <span class="p">=</span> <span class="m">0.05f</span><span class="p">;</span>

<span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">fontScale</span> <span class="p">=</span> <span class="n">defaultFontSize</span> <span class="p">/</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">pointSize</span> <span class="p">*</span> <span class="n">scale</span><span class="p">;</span>

    <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="s">"\"Hello, World!\""</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
    <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="s">"\"Hello, World!\""</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="k">void</span> <span class="nf">RenderCharacter</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posY</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="k">out</span> <span class="n">TMP_Character</span> <span class="n">tmpCharacter</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">glyph</span> <span class="p">=</span> <span class="n">tmpCharacter</span><span class="p">.</span><span class="n">glyph</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">mesh</span> <span class="p">=</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">glyph</span><span class="p">);</span>
        <span class="kt">var</span> <span class="n">charObject</span> <span class="p">=</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

        <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">localPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">posX</span><span class="p">,</span> <span class="n">posY</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="n">posX</span> <span class="p">+=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalAdvance</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"LookupTableì— ì—†ëŠ” ë¬¸ì : </span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="p">...</span>
    <span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">width</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">width</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">height</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">height</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">bx</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingX</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="k">by</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingY</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="k">void</span> <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineNum</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">posX</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">posY</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span> <span class="p">*</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">lineHeight</span> <span class="p">*</span> <span class="p">(</span><span class="n">lineNum</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">ch</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="n">posX</span> <span class="p">+=</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">],</span> <span class="n">ch</span><span class="p">)</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

        <span class="nf">RenderCharacter</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posY</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>ê°„ë‹¨í•˜ê²Œ backgroundë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤.</p>

<p><img src="/img/posts/unity/024.png" alt="024" width="500" class="center"></p>

<h2 id="ì‹¤í–‰í™”ë©´">
<a class="anchor" href="#%EC%8B%A4%ED%96%89%ED%99%94%EB%A9%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì‹¤í–‰í™”ë©´</h2>

<p><img src="/img/posts/unity/025.png" alt="025" width="500" class="center"></p>

<p>ë‹¤ ì¢‹ì€ë° ëª‡ê°€ì§€ ë§ˆìŒì— ì•ˆë“œëŠ” ì ì´ ìˆìŠµë‹ˆë‹¤.</p>

<ol>
  <li>ê¸€ìê°€ í™”ë©´ ê°€ìš´ë° ìˆëŠ” ì </li>
  <li>ê¸€ìì˜ ì›ì (0, 0)ì´ ì¢Œì¸¡ í•˜ë‹¨ì´ë¼ëŠ” ì </li>
</ol>

<p>ê¸€ìë“¤ì„ ì¢Œì¸¡ ìƒë‹¨ìœ¼ë¡œ ì´ë™ì‹œí‚¤ëŠ” ê²ƒì€ TextEditor ê²Œì„ ì˜¤ë¸Œì íŠ¸ì˜ Positionì„ ìˆ˜ì •í•´ì£¼ë©´ ê°„ë‹¨íˆ í•´ê²°ë©ë‹ˆë‹¤.<br>
í•˜ì§€ë§Œ ê¸€ìì˜ ì›ì ì´ ì¢Œì¸¡ í•˜ë‹¨ì´ë¼ëŠ” ì ì´ ê³„ì‚°ì— ë°©í•´ê°€ ë˜ë¯€ë¡œ (0, 0)ì„ ì¢Œì¸¡ ìƒë‹¨ìœ¼ë¡œ ë°”ê¿”ë´…ì‹œë‹¤.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">width</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">width</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">height</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">height</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">bx</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingX</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="k">by</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingY</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">ascentLine</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">ascentLine</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="k">private</span> <span class="n">Vector2</span><span class="p">[]</span> <span class="nf">CreateGlyphUVs</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">glyphRect</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">glyphRect</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">[</span><span class="m">4</span><span class="p">]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">((</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">((</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/posts/unity/026.png" alt="026" width="400" class="center"></p>

<p>ì›ì ì„ ì¢Œìƒë‹¨ì— ì˜ ë°°ì¹˜í•˜ì˜€ìŠµë‹ˆë‹¤.ğŸ˜†</p>

<p>ì´ì œ TextEditor ê²Œì„ ì˜¤ë¸Œì íŠ¸ì˜ Positionì„ ì ë‹¹íˆ ì´ë™ì‹œì¼œì£¼ë©´ ì™„ì„±ì…ë‹ˆë‹¤.</p>

<p><img src="/img/posts/unity/027.png" alt="027" width="100%"></p>

<h1 id="ì „ì²´-ì½”ë“œ">
<a class="anchor" href="#%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>ì „ì²´ ì½”ë“œ</h1>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
</pre></td>
<td class="rouge-code"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">TMPro</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.TextCore</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">TextEditor</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">TMP_FontAsset</span> <span class="n">fontAsset</span><span class="p">;</span>

    <span class="kt">float</span> <span class="n">fontScale</span> <span class="p">=</span> <span class="m">1f</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">defaultFontSize</span> <span class="p">=</span> <span class="m">12f</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">float</span> <span class="n">scale</span> <span class="p">=</span> <span class="m">0.05f</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">fontScale</span> <span class="p">=</span> <span class="n">defaultFontSize</span> <span class="p">/</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">pointSize</span> <span class="p">*</span> <span class="n">scale</span><span class="p">;</span>

        <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="s">"\"Hello, World!\""</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
        <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="s">"\"Hello, World!\""</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">RenderCharacter</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posY</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// charëŠ” uintë¡œ ì•”ì‹œì  í˜•ë³€í™˜</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="k">out</span> <span class="n">TMP_Character</span> <span class="n">tmpCharacter</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">glyph</span> <span class="p">=</span> <span class="n">tmpCharacter</span><span class="p">.</span><span class="n">glyph</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">mesh</span> <span class="p">=</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">glyph</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">charObject</span> <span class="p">=</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

            <span class="c1">// ë¬¸ìì˜ ìœ„ì¹˜ë¥¼ ì¡°ì •</span>
            <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">localPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">posX</span><span class="p">,</span> <span class="n">posY</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="c1">// ë‹¤ìŒ ê¸€ìì˜ ì‹œì‘ ìœ„ì¹˜</span>
            <span class="n">posX</span> <span class="p">+=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalAdvance</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"LookupTableì— ì—†ëŠ” ë¬¸ì : </span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">Mesh</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Create mesh</span>
        <span class="n">Mesh</span> <span class="n">mesh</span> <span class="p">=</span> <span class="k">new</span><span class="p">();</span>
        <span class="n">mesh</span><span class="p">.</span><span class="nf">SetVertices</span><span class="p">(</span><span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">glyph</span><span class="p">));</span>
        <span class="n">mesh</span><span class="p">.</span><span class="nf">SetColors</span><span class="p">(</span><span class="nf">CreateGlyphColors</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">black</span><span class="p">));</span>
        <span class="n">mesh</span><span class="p">.</span><span class="nf">SetUVs</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="nf">CreateGlyphUVs</span><span class="p">(</span><span class="n">glyph</span><span class="p">));</span>
        <span class="n">mesh</span><span class="p">.</span><span class="nf">SetIndices</span><span class="p">(</span><span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="m">4</span><span class="p">]</span> <span class="p">{</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span> <span class="p">},</span> <span class="n">MeshTopology</span><span class="p">.</span><span class="n">Quads</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">mesh</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">width</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">width</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">height</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">height</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">bx</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingX</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="kt">var</span> <span class="k">by</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingY</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">ascentLine</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">ascentLine</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
        <span class="p">{</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">Color</span><span class="p">[]</span> <span class="nf">CreateGlyphColors</span><span class="p">(</span><span class="n">Color</span> <span class="n">textColor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Color</span><span class="p">[</span><span class="m">4</span><span class="p">]</span>
        <span class="p">{</span>
            <span class="n">textColor</span><span class="p">,</span>
            <span class="n">textColor</span><span class="p">,</span>
            <span class="n">textColor</span><span class="p">,</span>
            <span class="n">textColor</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">Vector2</span><span class="p">[]</span> <span class="nf">CreateGlyphUVs</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">glyphRect</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">glyphRect</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">[</span><span class="m">4</span><span class="p">]</span>
        <span class="p">{</span>
            <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector2</span><span class="p">((</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector2</span><span class="p">((</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">GameObject</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="n">Mesh</span> <span class="n">mesh</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">GameObject</span> <span class="n">charObject</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GameObject</span><span class="p">(</span><span class="s">$"Char_</span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">parent</span> <span class="p">=</span> <span class="n">transform</span><span class="p">;</span>

        <span class="n">MeshRenderer</span> <span class="n">meshRenderer</span> <span class="p">=</span> <span class="n">charObject</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;();</span>
        <span class="n">meshRenderer</span><span class="p">.</span><span class="n">material</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">material</span><span class="p">;</span>

        <span class="n">MeshFilter</span> <span class="n">meshFilter</span> <span class="p">=</span> <span class="n">charObject</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">MeshFilter</span><span class="p">&gt;();</span>
        <span class="n">meshFilter</span><span class="p">.</span><span class="n">mesh</span> <span class="p">=</span> <span class="n">mesh</span><span class="p">;</span>

        <span class="k">return</span> <span class="n">charObject</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineNum</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">posX</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">posY</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span> <span class="p">*</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">lineHeight</span> <span class="p">*</span> <span class="p">(</span><span class="n">lineNum</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="kt">char</span> <span class="n">ch</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
                <span class="n">posX</span> <span class="p">+=</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">],</span> <span class="n">ch</span><span class="p">)</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

            <span class="nf">RenderCharacter</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posY</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">float</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="kt">char</span> <span class="n">prevChar</span><span class="p">,</span> <span class="kt">char</span> <span class="n">nextChar</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">previousGlyphIndex</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">[</span><span class="n">prevChar</span><span class="p">].</span><span class="n">glyphIndex</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">currentGlyphIndex</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">[</span><span class="n">nextChar</span><span class="p">].</span><span class="n">glyphIndex</span><span class="p">;</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="k">record</span> <span class="nc">in</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">fontFeatureTable</span><span class="p">.</span><span class="n">glyphPairAdjustmentRecords</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">record</span><span class="err">.</span><span class="nc">firstAdjustmentRecord</span><span class="p">.</span><span class="n">glyphIndex</span> <span class="p">==</span> <span class="n">previousGlyphIndex</span>
                <span class="p">&amp;&amp;</span> <span class="k">record</span><span class="err">.</span><span class="nc">secondAdjustmentRecord</span><span class="p">.</span><span class="n">glyphIndex</span> <span class="p">==</span> <span class="n">currentGlyphIndex</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="k">record</span><span class="err">.</span><span class="nc">firstAdjustmentRecord</span><span class="p">.</span><span class="n">glyphValueRecord</span><span class="p">.</span><span class="n">xAdvance</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="m">0.0f</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td>
</tr></tbody></table></code></pre></div></div>

<h1 id="next">
<a class="anchor" href="#next" aria-hidden="true"><span class="octicon octicon-link"></span></a>Next</h1>
<p>ë‹¤ìŒì—ëŠ” ê¸€ìë¥¼ ì…ë ¥ë°›ê³  ì¶œë ¥, ì»¤ì„œ ìƒì„±ì„ ì§„í–‰í•  ì˜ˆì •ì…ë‹ˆë‹¤.</p>


      <hr>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Unity</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Text_Editor</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Challenge</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Font_Asset</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>TMP</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Text_Mesh_Pro</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Mesh</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>bearingX</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>bearingY</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>AD</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>AX</div>
      

      <hr>

      <!-- ë‹¤ìŒ í¬ìŠ¤íŠ¸, ì´ì „ í¬ìŠ¤íŠ¸ ì¹´í…Œê³ ë¦¬ë³„ë¡œ ì •ë¦¬ -->
      

      
      

      
      <a class="btn btn-gray float-left" href="/posts/unity/challenging-projects-every-programmer-should-try-text-editor-1/" data-toggle="tooltip" data-placement="top" title="Challenging projects every programmer should try - Text Editor(1)">&larr; Previous<span class="d-none d-md-inline">
          Post</span></a>
      
      

      
      <div id="disqus_thread"></div>
      <script>
          /**
          *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
          *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
          
          var disqus_config = function () {
          this.page.url = 'https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/';  // Replace PAGE_URL with your page's canonical URL variable
          this.page.identifier = '/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
          };
          
          (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = 'https://jheun66.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      

    </div>
  </div>
</div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:jheun5@naver.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/amos55606241">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://www.facebook.com/amos.eun.73">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/jheun66">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://instagram.com/jheun66">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; Eun JongHyeok 2024</p>
      </div>
    </div>
  </div>
</footer>


  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/scripts.js"></script>

<script src="/assets/scripts.js"></script>


  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T1H0RYSGS7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T1H0RYSGS7');
</script>



  <style>
.videoWrapper {
    position: relative;
    padding-bottom: 56.333%;
    height: 0;
    background: black;
}
.videoWrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}    
</style>

<script>
function get_youtube_id(url) {
    var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;
    return (url.match(p)) ? RegExp.$1 : false;
}
function vimeo_embed(url,el) {
    var id = false;
    $.ajax({
        url: 'https://vimeo.com/api/oembed.json?url='+url,
        async: true,
        success: function(response) {
        if(response.video_id) {
            id = response.video_id;
            if(url.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
            if(url.indexOf('loop=1') !== -1) var loop=1; else var loop=0;
            var theInnerHTML = '<div class="videoWrapper"><iframe src="https://player.vimeo.com/video/'+id+'/?byline=0&title=0&portrait=0';
            if(autoplay==1) theInnerHTML += '&autoplay=1';
            if(loop==1) theInnerHTML += '&loop=1';
            theInnerHTML += '" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'; 
            el.innerHTML = theInnerHTML;
        }
        }
    });
}
function video_embed() {
    var p = document.getElementsByTagName('p');
    for(var i = 0; i < p.length; i++) {
        //check if this is an external url (that starts with https:// or http://
        if (p[i].innerHTML.indexOf("http://") == 0 ||
            p[i].innerHTML.indexOf("https://") == 0) {
            var youtube_id = get_youtube_id(p[i].innerHTML);
            if(youtube_id) {
                if(p[i].innerHTML.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
                if(p[i].innerHTML.indexOf('loop=1') !== -1) var loop=1; else var loop=0;
                var theInnerHTML = '<div class="videoWrapper"><iframe width="720" height="420" src="https://www.youtube.com/embed/' + youtube_id + '?rel=0&showinfo=0';
                if(autoplay==1) theInnerHTML += '&autoplay=1';
                if(loop==1) theInnerHTML += '&loop=1&playlist='+youtube_id+'&version=3';
                if(p[i].innerHTML.indexOf('start=') !== -1) theInnerHTML += '&start='+p[i].innerHTML.substring(p[i].innerHTML.indexOf('start=')+6);
                theInnerHTML += '" frameborder="0" allowfullscreen></iframe></div>';
                p[i].innerHTML = theInnerHTML;
            }
            if(p[i].innerHTML.indexOf('vimeo.com') !== -1) {
                //ask vimeo for the id and place the embed
                vimeo_embed(p[i].innerHTML,p[i]);
            }
        }
    }
}
video_embed();

function mp3_embed() {
    var p = document.getElementsByTagName('p');
    for(var i = 0; i < p.length; i++) {
        if(p[i].innerHTML.indexOf('.mp3') !== -1) {
            var str = p[i].innerHTML.split('?');
            if(str.length == 1) str[1] = '';
            var str1 = str[1];
            str1 = str1.replace('&','').replace('&','');
            str1 = str1.replace('autoplay=1','').replace('autoplay=0','');
            str1 = str1.replace('loop=1','').replace('loop=0','');
            str1 = str1.replace('controls=0','').replace('controls=1','');

            if (str[0].lastIndexOf('.mp3', str[0].length - 4) === str[0].length - 4 && str1.length == 0) {
                if(str[1].indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
                if(str[1].indexOf('loop=1') !== -1) var loop=1; else var loop=0;
                if(str[1].indexOf('controls=0') !== -1) var controls=0; else var controls=1;
                var newInnerHTML = '<audio';
                if(autoplay==1) newInnerHTML += ' autoplay';
                if(loop==1) newInnerHTML += ' loop';
                if(controls==1) newInnerHTML += ' controls';
                newInnerHTML += '><source src="'+str[0]+'" type="audio/mpeg">Your browser does not support the audio element.</audio>';
                p[i].innerHTML = newInnerHTML;
            }
        }
    }
}
mp3_embed();
</script>
  
  <script id="dsq-count-scr" src="//jheun66.disqus.com/count.js" async></script>
  
</body>

</html>
