<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Challenging projects every programmer should try - Text Editor(2) - In progress
    
  </title>

  <meta name="description" content="이전 포스팅 Challenging projects every programmer should try - Text Editor(1)">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
  
  <link rel="stylesheet" href="/assets/highlight.css">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/">
  <link rel="alternate" type="application/rss+xml" title="In progress" href="/feed.xml">

  <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
<script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <style type="text/css">
    a.comment-link:link {text-decoration: none; color:rgb(170, 170, 170)} 
    a.comment-link:visited {text-decoration: none; color:rgb(170, 170, 170)} 
    a.comment-link:hover {text-decoration: underline;}
  </style>
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Challenging projects every programmer should try - Text Editor(2) | In progress</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Challenging projects every programmer should try - Text Editor(2)" />
<meta name="author" content="Eun JongHyeok" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="이전 포스팅 Challenging projects every programmer should try - Text Editor(1)" />
<meta property="og:description" content="이전 포스팅 Challenging projects every programmer should try - Text Editor(1)" />
<link rel="canonical" href="https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/" />
<meta property="og:url" content="https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/" />
<meta property="og:site_name" content="In progress" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-04-22T15:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Challenging projects every programmer should try - Text Editor(2)" />
<meta name="google-site-verification" content="tbEwkoz_olC5QjXqaH3xRQX19VegCM80JTKhBa3iSx8" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Eun JongHyeok"},"dateModified":"2024-04-22T15:00:00+00:00","datePublished":"2024-04-22T15:00:00+00:00","description":"이전 포스팅 Challenging projects every programmer should try - Text Editor(1)","headline":"Challenging projects every programmer should try - Text Editor(2)","mainEntityOfPage":{"@type":"WebPage","@id":"https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/"},"url":"https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/"}</script>
<!-- End Jekyll SEO tag -->


  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8954355499146518"
     crossorigin="anonymous"></script>
  <script async src="https://fundingchoicesmessages.google.com/i/pub-8954355499146518?ers=1" nonce="vIYNAgythFLTbocmvIWE6A"></script><script nonce="vIYNAgythFLTbocmvIWE6A">(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>
</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">In progress</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/category">Category</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/contact">Contact</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->



<header class="masthead" style="background-color: #3F37C9;">

  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <div class="post-heading">
          <h1>Challenging projects every programmer should try - Text Editor(2)</h1>
          
          <span class="meta">Posted by Eun JongHyeok on April 22, 2024
          </span>
        </div>
      </div>
    </div>
  </div>
</header>

<div class="container">
  <div class="row min-vh-100 flex-column flex-lg-row">
    <div class="col-lg-8 col-md-10 mx-auto">
  
      <ol id="toc" class="table-of-contents">
<li class="toc-entry toc-h1"><a href="#이전-포스팅">이전 포스팅</a></li>
<li class="toc-entry toc-h1"><a href="#문자열-출력하기">문자열 출력하기</a>
<ol class="table-of-contents-sublist-class">
<li class="toc-entry toc-h2"><a href="#glyph-table-이해하기">Glyph Table 이해하기</a></li>
<li class="toc-entry toc-h2"><a href="#glyph-adjustment-table-이해하기">Glyph Adjustment Table 이해하기</a></li>
<li class="toc-entry toc-h2"><a href="#라인간의-간격">라인간의 간격</a></li>
</ol>
</li>
<li class="toc-entry toc-h1"><a href="#화면-크기-맞추기">화면 크기 맞추기</a>
<ol class="table-of-contents-sublist-class">
<li class="toc-entry toc-h2"><a href="#실행화면">실행화면</a></li>
</ol>
</li>
<li class="toc-entry toc-h1"><a href="#전체-코드">전체 코드</a></li>
<li class="toc-entry toc-h1"><a href="#next">Next</a></li>
</ol><h1 id="이전-포스팅">
<a class="anchor" href="#%EC%9D%B4%EC%A0%84-%ED%8F%AC%EC%8A%A4%ED%8C%85" aria-hidden="true"><span class="octicon octicon-link"></span></a>이전 포스팅</h1>
<p><a href="/posts/unity/challenging-projects-every-programmer-should-try-text-editor-1/">Challenging projects every programmer should try - Text Editor(1)</a></p>

<h1 id="문자열-출력하기">
<a class="anchor" href="#%EB%AC%B8%EC%9E%90%EC%97%B4-%EC%B6%9C%EB%A0%A5%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>문자열 출력하기</h1>
<p>이번에는 문자열을 출력에 도전해봅시다.<br>
예시답게 <code class="language-plaintext highlighter-rouge">"Hello, World!"</code>를 출력하려 하는데요.<br>
문자열을 출력하기 위해서는 글자 사이 간격뿐만 아니라 각 글자들이 같은 베이스 라인을 기준으로 그려지고 있다는 점을 고려해야 합니다.<br>
이때 Glyph Table에 있는 정보들을 활용해줄 수 있습니다.</p>

<h2 id="glyph-table-이해하기">
<a class="anchor" href="#glyph-table-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Glyph Table 이해하기</h2>
<p>폰트 애셋 안에 있는 Glyph Table에서 첫번째 문자 <code class="language-plaintext highlighter-rouge">"</code>를 찾아봅시다.<br>
<img src="/img/posts/unity/018.png" alt="018" width="450" class="center">
Glyph Metrics에 <code class="language-plaintext highlighter-rouge">BX</code>, <code class="language-plaintext highlighter-rouge">BY</code>, <code class="language-plaintext highlighter-rouge">AD</code>가 있는 것을 확인할 수 있습니다.<br>
GlyphMetrics의 구조체에서 해당 프로퍼티가 어떤 용도인지 설명이 있습니다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre></td>
<td class="rouge-code"><pre><span class="k">public</span> <span class="k">struct</span> <span class="nc">GlyphMetrics</span> <span class="p">:</span> <span class="n">IEquatable</span><span class="p">&lt;</span><span class="n">GlyphMetrics</span><span class="p">&gt;</span>
<span class="p">{</span>
    <span class="p">...</span>

    <span class="c1">//</span>
    <span class="c1">// 요약:</span>
    <span class="c1">//     The horizontal distance from the current drawing position (origin) relative to</span>
    <span class="c1">//     the element's left bounding box edge (bbox).</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">horizontalBearingX</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//</span>
    <span class="c1">// 요약:</span>
    <span class="c1">//     The vertical distance from the current baseline relative to the element's top</span>
    <span class="c1">//     bounding box edge (bbox).</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">horizontalBearingY</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="c1">//</span>
    <span class="c1">// 요약:</span>
    <span class="c1">//     The horizontal distance to increase (left to right) or decrease (right to left)</span>
    <span class="c1">//     the drawing position relative to the origin of the text element.</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">horizontalAdvance</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="p">...</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>BX는 바운딩 박스 왼쪽 모서리에서 수평방향으로 얼마나 떨어져있냐를 의미합니다. 즉, 좌측 여백이라 생각합시다.<br>
BY는 바운딩 박스 상단 모서리에서 베이스라인까지 수직방향으로 얼마나 떨어져있냐를 의미합니다. 즉, 상단 높이라 생각합시다.<br>
AD는 텍스트가 그려지고 수평방향으로 얼마만큼 이동해야하는지를 의미합니다. 즉 다음 글자와의 수평거리라 생각합시다.</p>

<p><img src="https://freetype.org/freetype2/docs/glyphs/glyph-metrics-1.svg" alt="019" width="400" class="center">
<img src="https://freetype.org/freetype2/docs/glyphs/glyph-metrics-3.svg" alt="020" width="400" class="center">
<a href="https://freetype.org/freetype2/docs/glyphs/glyphs-3.html">출처</a></p>

<p>위 이미지는 구글링 했을 때 가장 좋은 예시라 생각되어 이미지를 가져왔습니다.<br>
포스팅을 다하고 나중에 알게된 내용이지만 TMP_TextInfoDebugTool.cs를 통해서도 확인할 수 있다는 것을 알게되었습니다.😭</p>

<p>잠깐 이전 포스트의 코드를 살펴봅시다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">glyphRect</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">glyphRect</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>이전에는 정말 단순하게 좌측하단을 (0, 0)으로 생각했지만 이제는 <code class="language-plaintext highlighter-rouge">BX</code>, <code class="language-plaintext highlighter-rouge">BY</code>도 같이 고려해줍시다.<br>
좌표를 다시 지정하면 다음과 같이 바꿀 수 있습니다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">width</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">width</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">height</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">height</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">bx</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingX</span><span class="p">;</span>
    <span class="kt">var</span> <span class="k">by</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingY</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">AD</code>는 단순하게 문자의 로컬 포지션만 이동하는 것으로 해결할 수 있습니다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td>
<td class="rouge-code"><pre><span class="k">void</span> <span class="nf">RenderCharacter</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posX</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="k">out</span> <span class="n">TMP_Character</span> <span class="n">tmpCharacter</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">glyph</span> <span class="p">=</span> <span class="n">tmpCharacter</span><span class="p">.</span><span class="n">glyph</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">mesh</span> <span class="p">=</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">glyph</span><span class="p">);</span>
        <span class="kt">var</span> <span class="n">charObject</span> <span class="p">=</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

        <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">localPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">posX</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span> 
        <span class="c1">// 다음 글자의 시작 위치</span>
        <span class="n">posX</span> <span class="p">+=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalAdvance</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"LookupTable에 없는 문자 : </span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<h2 id="glyph-adjustment-table-이해하기">
<a class="anchor" href="#glyph-adjustment-table-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>Glyph Adjustment Table 이해하기</h2>
<p>Glyph Table만 적용해도 문제가 없지만 기왕 시작한거 Adjustment Table도 적용해봅시다.<br>
예문 “Hello, World!”에서 ‘W’와 ‘o’를 찾아보면<br>
아래와 같이 <code class="language-plaintext highlighter-rouge">AX</code>가 지정되어 있습니다.
<img src="/img/posts/unity/021.png" alt="021" width="450" class="center"></p>

<p>왼쪽에 있는 AX의 값은 글자사이의 간격을 해당 값만큼 조절하라는 의미입니다.<br>
해당 값은 아래와 같이 구해줄 수 있습니다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="kt">float</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="kt">char</span> <span class="n">prevChar</span><span class="p">,</span> <span class="kt">char</span> <span class="n">nextChar</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">previousGlyphIndex</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">[</span><span class="n">prevChar</span><span class="p">].</span><span class="n">glyphIndex</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">currentGlyphIndex</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">[</span><span class="n">nextChar</span><span class="p">].</span><span class="n">glyphIndex</span><span class="p">;</span>

    <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="k">record</span> <span class="nc">in</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">fontFeatureTable</span><span class="p">.</span><span class="n">glyphPairAdjustmentRecords</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">record</span><span class="err">.</span><span class="nc">firstAdjustmentRecord</span><span class="p">.</span><span class="n">glyphIndex</span> <span class="p">==</span> <span class="n">previousGlyphIndex</span> 
            <span class="p">&amp;&amp;</span> <span class="k">record</span><span class="err">.</span><span class="nc">secondAdjustmentRecord</span><span class="p">.</span><span class="n">glyphIndex</span> <span class="p">==</span> <span class="n">currentGlyphIndex</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">record</span><span class="err">.</span><span class="nc">firstAdjustmentRecord</span><span class="p">.</span><span class="n">glyphValueRecord</span><span class="p">.</span><span class="n">xAdvance</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="m">0.0f</span><span class="p">;</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>우선 라인에 문자열을 출력하는 함수는 간단하게 만들어봅니다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td>
<td class="rouge-code"><pre><span class="k">void</span> <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">posX</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">ch</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="n">posX</span> <span class="p">+=</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">],</span> <span class="n">ch</span><span class="p">);</span>

        <span class="nf">RenderCharacter</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posX</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>
<h2 id="라인간의-간격">
<a class="anchor" href="#%EB%9D%BC%EC%9D%B8%EA%B0%84%EC%9D%98-%EA%B0%84%EA%B2%A9" aria-hidden="true"><span class="octicon octicon-link"></span></a>라인간의 간격</h2>
<p>라인간의 간격에는 Face Info의 Line Height 속성을 적용할 겁니다.</p>

<p><img src="/img/posts/unity/022.png" alt="022" width="450" class="center"></p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td>
<td class="rouge-code"><pre><span class="k">void</span> <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineNum</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">posX</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">posY</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span> <span class="p">*</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">lineHeight</span> <span class="p">*</span> <span class="p">(</span><span class="n">lineNum</span> <span class="p">-</span> <span class="m">1</span><span class="p">);</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">ch</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="n">posX</span> <span class="p">+=</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">],</span> <span class="n">ch</span><span class="p">);</span>

        <span class="nf">RenderCharacter</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posY</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">void</span> <span class="nf">RenderCharacter</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posY</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// char는 uint로 암시적 형변환</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="k">out</span> <span class="n">TMP_Character</span> <span class="n">tmpCharacter</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">glyph</span> <span class="p">=</span> <span class="n">tmpCharacter</span><span class="p">.</span><span class="n">glyph</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">mesh</span> <span class="p">=</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">glyph</span><span class="p">);</span>
        <span class="kt">var</span> <span class="n">charObject</span> <span class="p">=</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

        <span class="c1">// 문자의 위치를 조정</span>
        <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">localPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">posX</span><span class="p">,</span> <span class="n">posY</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="c1">// 다음 글자의 시작 위치</span>
        <span class="n">posX</span> <span class="p">+=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalAdvance</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"LookupTable에 없는 문자 : </span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>posY를 line 높이만큼 낮춰서 그려주면 됩니다.</p>

<h1 id="화면-크기-맞추기">
<a class="anchor" href="#%ED%99%94%EB%A9%B4-%ED%81%AC%EA%B8%B0-%EB%A7%9E%EC%B6%94%EA%B8%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>화면 크기 맞추기</h1>
<p>현재 vertice 사이즈를 커서 카메라에 다 안들어옵니다.<br>
우선 카메라 세팅을 orthographic으로 바꾸고 size는 10 정도로 맞춥니다.</p>

<p><img src="/img/posts/unity/023.png" alt="023" width="450" class="center"></p>

<p>fontScale 변수를 만들어서 리사이징에 사용합니다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td>
<td class="rouge-code"><pre><span class="kt">float</span> <span class="n">fontScale</span> <span class="p">=</span> <span class="m">1f</span><span class="p">;</span>
<span class="k">public</span> <span class="kt">float</span> <span class="n">defaultFontSize</span> <span class="p">=</span> <span class="m">12f</span><span class="p">;</span>
<span class="k">private</span> <span class="kt">float</span> <span class="n">scale</span> <span class="p">=</span> <span class="m">0.05f</span><span class="p">;</span>

<span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">fontScale</span> <span class="p">=</span> <span class="n">defaultFontSize</span> <span class="p">/</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">pointSize</span> <span class="p">*</span> <span class="n">scale</span><span class="p">;</span>

    <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="s">"\"Hello, World!\""</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
    <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="s">"\"Hello, World!\""</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="k">void</span> <span class="nf">RenderCharacter</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posY</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="k">out</span> <span class="n">TMP_Character</span> <span class="n">tmpCharacter</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">glyph</span> <span class="p">=</span> <span class="n">tmpCharacter</span><span class="p">.</span><span class="n">glyph</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">mesh</span> <span class="p">=</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">glyph</span><span class="p">);</span>
        <span class="kt">var</span> <span class="n">charObject</span> <span class="p">=</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

        <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">localPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">posX</span><span class="p">,</span> <span class="n">posY</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="n">posX</span> <span class="p">+=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalAdvance</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"LookupTable에 없는 문자 : </span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="p">...</span>
    <span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">width</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">width</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">height</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">height</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">bx</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingX</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="k">by</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingY</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">};</span>
<span class="p">}</span>
<span class="p">...</span>
<span class="k">void</span> <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineNum</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">float</span> <span class="n">posX</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>
    <span class="kt">float</span> <span class="n">posY</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span> <span class="p">*</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">lineHeight</span> <span class="p">*</span> <span class="p">(</span><span class="n">lineNum</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
    <span class="p">{</span>
        <span class="kt">char</span> <span class="n">ch</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
            <span class="n">posX</span> <span class="p">+=</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">],</span> <span class="n">ch</span><span class="p">)</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

        <span class="nf">RenderCharacter</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posY</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p>간단하게 background를 만들어줍니다.</p>

<p><img src="/img/posts/unity/024.png" alt="024" width="500" class="center"></p>

<h2 id="실행화면">
<a class="anchor" href="#%EC%8B%A4%ED%96%89%ED%99%94%EB%A9%B4" aria-hidden="true"><span class="octicon octicon-link"></span></a>실행화면</h2>

<p><img src="/img/posts/unity/025.png" alt="025" width="500" class="center"></p>

<p>다 좋은데 몇가지 마음에 안드는 점이 있습니다.</p>

<ol>
  <li>글자가 화면 가운데 있는 점</li>
  <li>글자의 원점(0, 0)이 좌측 하단이라는 점</li>
</ol>

<p>글자들을 좌측 상단으로 이동시키는 것은 TextEditor 게임 오브젝트의 Position을 수정해주면 간단히 해결됩니다.<br>
하지만 글자의 원점이 좌측 하단이라는 점이 계산에 방해가 되므로 (0, 0)을 좌측 상단으로 바꿔봅시다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">width</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">width</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">height</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">height</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">bx</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingX</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="k">by</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingY</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">ascentLine</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">ascentLine</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
    <span class="p">};</span>
<span class="p">}</span>

<span class="k">private</span> <span class="n">Vector2</span><span class="p">[]</span> <span class="nf">CreateGlyphUVs</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">var</span> <span class="n">glyphRect</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">glyphRect</span><span class="p">;</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">[</span><span class="m">4</span><span class="p">]</span>
    <span class="p">{</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">((</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">((</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
        <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<p><img src="/img/posts/unity/026.png" alt="026" width="400" class="center"></p>

<p>원점을 좌상단에 잘 배치하였습니다.😆</p>

<p>이제 TextEditor 게임 오브젝트의 Position을 적당히 이동시켜주면 완성입니다.</p>

<p><img src="/img/posts/unity/027.png" alt="027" width="100%"></p>

<h1 id="전체-코드">
<a class="anchor" href="#%EC%A0%84%EC%B2%B4-%EC%BD%94%EB%93%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>전체 코드</h1>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
</pre></td>
<td class="rouge-code"><pre><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">TMPro</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">UnityEngine.TextCore</span><span class="p">;</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">TextEditor</span> <span class="p">:</span> <span class="n">MonoBehaviour</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">TMP_FontAsset</span> <span class="n">fontAsset</span><span class="p">;</span>

    <span class="kt">float</span> <span class="n">fontScale</span> <span class="p">=</span> <span class="m">1f</span><span class="p">;</span>
    <span class="k">public</span> <span class="kt">float</span> <span class="n">defaultFontSize</span> <span class="p">=</span> <span class="m">12f</span><span class="p">;</span>
    <span class="k">private</span> <span class="kt">float</span> <span class="n">scale</span> <span class="p">=</span> <span class="m">0.05f</span><span class="p">;</span>

    <span class="k">void</span> <span class="nf">Start</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">fontScale</span> <span class="p">=</span> <span class="n">defaultFontSize</span> <span class="p">/</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">pointSize</span> <span class="p">*</span> <span class="n">scale</span><span class="p">;</span>

        <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="s">"\"Hello, World!\""</span><span class="p">,</span> <span class="m">1</span><span class="p">);</span>
        <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="s">"\"Hello, World!\""</span><span class="p">,</span> <span class="m">2</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">RenderCharacter</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="kt">float</span> <span class="n">posY</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// char는 uint로 암시적 형변환</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">.</span><span class="nf">TryGetValue</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="k">out</span> <span class="n">TMP_Character</span> <span class="n">tmpCharacter</span><span class="p">))</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">glyph</span> <span class="p">=</span> <span class="n">tmpCharacter</span><span class="p">.</span><span class="n">glyph</span><span class="p">;</span>
            <span class="kt">var</span> <span class="n">mesh</span> <span class="p">=</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">glyph</span><span class="p">);</span>
            <span class="kt">var</span> <span class="n">charObject</span> <span class="p">=</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="n">character</span><span class="p">,</span> <span class="n">mesh</span><span class="p">);</span>

            <span class="c1">// 문자의 위치를 조정</span>
            <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">localPosition</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">posX</span><span class="p">,</span> <span class="n">posY</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
            <span class="c1">// 다음 글자의 시작 위치</span>
            <span class="n">posX</span> <span class="p">+=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalAdvance</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">Debug</span><span class="p">.</span><span class="nf">LogError</span><span class="p">(</span><span class="s">$"LookupTable에 없는 문자 : </span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">Mesh</span> <span class="nf">CreateMesh</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="c1">// Create mesh</span>
        <span class="n">Mesh</span> <span class="n">mesh</span> <span class="p">=</span> <span class="k">new</span><span class="p">();</span>
        <span class="n">mesh</span><span class="p">.</span><span class="nf">SetVertices</span><span class="p">(</span><span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">glyph</span><span class="p">));</span>
        <span class="n">mesh</span><span class="p">.</span><span class="nf">SetColors</span><span class="p">(</span><span class="nf">CreateGlyphColors</span><span class="p">(</span><span class="n">Color</span><span class="p">.</span><span class="n">black</span><span class="p">));</span>
        <span class="n">mesh</span><span class="p">.</span><span class="nf">SetUVs</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="nf">CreateGlyphUVs</span><span class="p">(</span><span class="n">glyph</span><span class="p">));</span>
        <span class="n">mesh</span><span class="p">.</span><span class="nf">SetIndices</span><span class="p">(</span><span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="m">4</span><span class="p">]</span> <span class="p">{</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span> <span class="p">},</span> <span class="n">MeshTopology</span><span class="p">.</span><span class="n">Quads</span><span class="p">,</span> <span class="m">0</span><span class="p">);</span>
        <span class="k">return</span> <span class="n">mesh</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">Vector3</span><span class="p">[]</span> <span class="nf">CreateGlyphVertices</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">width</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">width</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">height</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">height</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">bx</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingX</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="kt">var</span> <span class="k">by</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">metrics</span><span class="p">.</span><span class="n">horizontalBearingY</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">ascentLine</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">ascentLine</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">new</span> <span class="n">Vector3</span><span class="p">[]</span>
        <span class="p">{</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span> <span class="p">+</span> <span class="n">width</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector3</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="p">-</span><span class="n">ascentLine</span> <span class="p">+</span> <span class="k">by</span> <span class="p">-</span> <span class="n">height</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">Color</span><span class="p">[]</span> <span class="nf">CreateGlyphColors</span><span class="p">(</span><span class="n">Color</span> <span class="n">textColor</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="n">Color</span><span class="p">[</span><span class="m">4</span><span class="p">]</span>
        <span class="p">{</span>
            <span class="n">textColor</span><span class="p">,</span>
            <span class="n">textColor</span><span class="p">,</span>
            <span class="n">textColor</span><span class="p">,</span>
            <span class="n">textColor</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">Vector2</span><span class="p">[]</span> <span class="nf">CreateGlyphUVs</span><span class="p">(</span><span class="n">Glyph</span> <span class="n">glyph</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">glyphRect</span> <span class="p">=</span> <span class="n">glyph</span><span class="p">.</span><span class="n">glyphRect</span><span class="p">;</span>

        <span class="k">return</span> <span class="k">new</span> <span class="n">Vector2</span><span class="p">[</span><span class="m">4</span><span class="p">]</span>
        <span class="p">{</span>
            <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector2</span><span class="p">((</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">height</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector2</span><span class="p">((</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">+</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">width</span><span class="p">)</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
            <span class="k">new</span> <span class="nf">Vector2</span><span class="p">(</span><span class="n">glyphRect</span><span class="p">.</span><span class="n">x</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasWidth</span><span class="p">,</span> <span class="n">glyphRect</span><span class="p">.</span><span class="n">y</span> <span class="p">/</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="n">fontAsset</span><span class="p">.</span><span class="n">atlasHeight</span><span class="p">),</span>
        <span class="p">};</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="n">GameObject</span> <span class="nf">CreateCharObject</span><span class="p">(</span><span class="kt">char</span> <span class="n">character</span><span class="p">,</span> <span class="n">Mesh</span> <span class="n">mesh</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">GameObject</span> <span class="n">charObject</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">GameObject</span><span class="p">(</span><span class="s">$"Char_</span><span class="p">{</span><span class="n">character</span><span class="p">}</span><span class="s">"</span><span class="p">);</span>
        <span class="n">charObject</span><span class="p">.</span><span class="n">transform</span><span class="p">.</span><span class="n">parent</span> <span class="p">=</span> <span class="n">transform</span><span class="p">;</span>

        <span class="n">MeshRenderer</span> <span class="n">meshRenderer</span> <span class="p">=</span> <span class="n">charObject</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">MeshRenderer</span><span class="p">&gt;();</span>
        <span class="n">meshRenderer</span><span class="p">.</span><span class="n">material</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">material</span><span class="p">;</span>

        <span class="n">MeshFilter</span> <span class="n">meshFilter</span> <span class="p">=</span> <span class="n">charObject</span><span class="p">.</span><span class="n">AddComponent</span><span class="p">&lt;</span><span class="n">MeshFilter</span><span class="p">&gt;();</span>
        <span class="n">meshFilter</span><span class="p">.</span><span class="n">mesh</span> <span class="p">=</span> <span class="n">mesh</span><span class="p">;</span>

        <span class="k">return</span> <span class="n">charObject</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">void</span> <span class="nf">RenderStringInLine</span><span class="p">(</span><span class="kt">string</span> <span class="n">str</span><span class="p">,</span> <span class="kt">int</span> <span class="n">lineNum</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">float</span> <span class="n">posX</span> <span class="p">=</span> <span class="m">0.0f</span><span class="p">;</span>
        <span class="kt">float</span> <span class="n">posY</span> <span class="p">=</span> <span class="p">-</span><span class="m">1</span> <span class="p">*</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">faceInfo</span><span class="p">.</span><span class="n">lineHeight</span> <span class="p">*</span> <span class="p">(</span><span class="n">lineNum</span> <span class="p">-</span> <span class="m">1</span><span class="p">)</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="p">&lt;</span> <span class="n">str</span><span class="p">.</span><span class="n">Length</span><span class="p">;</span> <span class="n">i</span><span class="p">++)</span>
        <span class="p">{</span>
            <span class="kt">char</span> <span class="n">ch</span> <span class="p">=</span> <span class="n">str</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="p">!=</span> <span class="m">0</span><span class="p">)</span>
                <span class="n">posX</span> <span class="p">+=</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="n">str</span><span class="p">[</span><span class="n">i</span> <span class="p">-</span> <span class="m">1</span><span class="p">],</span> <span class="n">ch</span><span class="p">)</span> <span class="p">*</span> <span class="n">fontScale</span><span class="p">;</span>

            <span class="nf">RenderCharacter</span><span class="p">(</span><span class="n">ch</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posX</span><span class="p">,</span> <span class="k">ref</span> <span class="n">posY</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">private</span> <span class="kt">float</span> <span class="nf">GetAdvanceX</span><span class="p">(</span><span class="kt">char</span> <span class="n">prevChar</span><span class="p">,</span> <span class="kt">char</span> <span class="n">nextChar</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">previousGlyphIndex</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">[</span><span class="n">prevChar</span><span class="p">].</span><span class="n">glyphIndex</span><span class="p">;</span>
        <span class="kt">var</span> <span class="n">currentGlyphIndex</span> <span class="p">=</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">characterLookupTable</span><span class="p">[</span><span class="n">nextChar</span><span class="p">].</span><span class="n">glyphIndex</span><span class="p">;</span>

        <span class="k">foreach</span> <span class="p">(</span><span class="kt">var</span> <span class="k">record</span> <span class="nc">in</span> <span class="n">fontAsset</span><span class="p">.</span><span class="n">fontFeatureTable</span><span class="p">.</span><span class="n">glyphPairAdjustmentRecords</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="k">record</span><span class="err">.</span><span class="nc">firstAdjustmentRecord</span><span class="p">.</span><span class="n">glyphIndex</span> <span class="p">==</span> <span class="n">previousGlyphIndex</span>
                <span class="p">&amp;&amp;</span> <span class="k">record</span><span class="err">.</span><span class="nc">secondAdjustmentRecord</span><span class="p">.</span><span class="n">glyphIndex</span> <span class="p">==</span> <span class="n">currentGlyphIndex</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="k">return</span> <span class="k">record</span><span class="err">.</span><span class="nc">firstAdjustmentRecord</span><span class="p">.</span><span class="n">glyphValueRecord</span><span class="p">.</span><span class="n">xAdvance</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="m">0.0f</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td>
</tr></tbody></table></code></pre></div></div>

<h1 id="next">
<a class="anchor" href="#next" aria-hidden="true"><span class="octicon octicon-link"></span></a>Next</h1>
<p>다음에는 글자를 입력받고 출력, 커서 생성을 진행할 예정입니다.</p>


      <hr>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Unity</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Text_Editor</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Challenge</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Font_Asset</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>TMP</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Text_Mesh_Pro</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Mesh</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>bearingX</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>bearingY</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>AD</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>AX</div>
      

      <hr>

      <!-- 다음 포스트, 이전 포스트 카테고리별로 정리 -->
      

      
      

      
      <a class="btn btn-gray float-left" href="/posts/unity/challenging-projects-every-programmer-should-try-text-editor-1/" data-toggle="tooltip" data-placement="top" title="Challenging projects every programmer should try - Text Editor(1)">&larr; Previous<span class="d-none d-md-inline">
          Post</span></a>
      
      

      
      <div id="disqus_thread"></div>
      <script>
          /**
          *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
          *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
          
          var disqus_config = function () {
          this.page.url = 'https://jheun66.github.io/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/';  // Replace PAGE_URL with your page's canonical URL variable
          this.page.identifier = '/posts/unity/challenging-projects-every-programmer-should-try-text-editor-2/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
          };
          
          (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = 'https://jheun66.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      

    </div>
  </div>
</div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:jheun5@naver.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/amos55606241">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://www.facebook.com/amos.eun.73">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/jheun66">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://instagram.com/jheun66">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; Eun JongHyeok 2024</p>
      </div>
    </div>
  </div>
</footer>


  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/scripts.js"></script>

<script src="/assets/scripts.js"></script>


  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T1H0RYSGS7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T1H0RYSGS7');
</script>



  <style>
.videoWrapper {
    position: relative;
    padding-bottom: 56.333%;
    height: 0;
    background: black;
}
.videoWrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}    
</style>

<script>
function get_youtube_id(url) {
    var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;
    return (url.match(p)) ? RegExp.$1 : false;
}
function vimeo_embed(url,el) {
    var id = false;
    $.ajax({
        url: 'https://vimeo.com/api/oembed.json?url='+url,
        async: true,
        success: function(response) {
        if(response.video_id) {
            id = response.video_id;
            if(url.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
            if(url.indexOf('loop=1') !== -1) var loop=1; else var loop=0;
            var theInnerHTML = '<div class="videoWrapper"><iframe src="https://player.vimeo.com/video/'+id+'/?byline=0&title=0&portrait=0';
            if(autoplay==1) theInnerHTML += '&autoplay=1';
            if(loop==1) theInnerHTML += '&loop=1';
            theInnerHTML += '" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'; 
            el.innerHTML = theInnerHTML;
        }
        }
    });
}
function video_embed() {
    var p = document.getElementsByTagName('p');
    for(var i = 0; i < p.length; i++) {
        //check if this is an external url (that starts with https:// or http://
        if (p[i].innerHTML.indexOf("http://") == 0 ||
            p[i].innerHTML.indexOf("https://") == 0) {
            var youtube_id = get_youtube_id(p[i].innerHTML);
            if(youtube_id) {
                if(p[i].innerHTML.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
                if(p[i].innerHTML.indexOf('loop=1') !== -1) var loop=1; else var loop=0;
                var theInnerHTML = '<div class="videoWrapper"><iframe width="720" height="420" src="https://www.youtube.com/embed/' + youtube_id + '?rel=0&showinfo=0';
                if(autoplay==1) theInnerHTML += '&autoplay=1';
                if(loop==1) theInnerHTML += '&loop=1&playlist='+youtube_id+'&version=3';
                if(p[i].innerHTML.indexOf('start=') !== -1) theInnerHTML += '&start='+p[i].innerHTML.substring(p[i].innerHTML.indexOf('start=')+6);
                theInnerHTML += '" frameborder="0" allowfullscreen></iframe></div>';
                p[i].innerHTML = theInnerHTML;
            }
            if(p[i].innerHTML.indexOf('vimeo.com') !== -1) {
                //ask vimeo for the id and place the embed
                vimeo_embed(p[i].innerHTML,p[i]);
            }
        }
    }
}
video_embed();

function mp3_embed() {
    var p = document.getElementsByTagName('p');
    for(var i = 0; i < p.length; i++) {
        if(p[i].innerHTML.indexOf('.mp3') !== -1) {
            var str = p[i].innerHTML.split('?');
            if(str.length == 1) str[1] = '';
            var str1 = str[1];
            str1 = str1.replace('&','').replace('&','');
            str1 = str1.replace('autoplay=1','').replace('autoplay=0','');
            str1 = str1.replace('loop=1','').replace('loop=0','');
            str1 = str1.replace('controls=0','').replace('controls=1','');

            if (str[0].lastIndexOf('.mp3', str[0].length - 4) === str[0].length - 4 && str1.length == 0) {
                if(str[1].indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
                if(str[1].indexOf('loop=1') !== -1) var loop=1; else var loop=0;
                if(str[1].indexOf('controls=0') !== -1) var controls=0; else var controls=1;
                var newInnerHTML = '<audio';
                if(autoplay==1) newInnerHTML += ' autoplay';
                if(loop==1) newInnerHTML += ' loop';
                if(controls==1) newInnerHTML += ' controls';
                newInnerHTML += '><source src="'+str[0]+'" type="audio/mpeg">Your browser does not support the audio element.</audio>';
                p[i].innerHTML = newInnerHTML;
            }
        }
    }
}
mp3_embed();
</script>
  
  <script id="dsq-count-scr" src="//jheun66.disqus.com/count.js" async></script>
  
</body>

</html>
