<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Red-Black Tree - C# 구현 - In progress
    
  </title>

  <meta name="description" content="결과 결과 미리보기입니다.😆">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <script src="https://use.fontawesome.com/releases/v5.15.3/js/all.js" crossorigin="anonymous"></script>
  
  <link rel="stylesheet" href="/assets/highlight.css">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="https://jheun66.github.io/posts/algorithm/red-black-tree/">
  <link rel="alternate" type="application/rss+xml" title="In progress" href="/feed.xml">

  <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
<script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">

  <style type="text/css">
    a.comment-link:link {text-decoration: none; color:rgb(170, 170, 170)} 
    a.comment-link:visited {text-decoration: none; color:rgb(170, 170, 170)} 
    a.comment-link:hover {text-decoration: underline;}
  </style>
  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Red-Black Tree - C# 구현 | In progress</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Red-Black Tree - C# 구현" />
<meta name="author" content="Eun JongHyeok" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="결과 결과 미리보기입니다.😆" />
<meta property="og:description" content="결과 결과 미리보기입니다.😆" />
<link rel="canonical" href="https://jheun66.github.io/posts/algorithm/red-black-tree/" />
<meta property="og:url" content="https://jheun66.github.io/posts/algorithm/red-black-tree/" />
<meta property="og:site_name" content="In progress" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2024-04-28T15:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Red-Black Tree - C# 구현" />
<meta name="google-site-verification" content="tbEwkoz_olC5QjXqaH3xRQX19VegCM80JTKhBa3iSx8" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Eun JongHyeok"},"dateModified":"2024-04-28T15:00:00+00:00","datePublished":"2024-04-28T15:00:00+00:00","description":"결과 결과 미리보기입니다.😆","headline":"Red-Black Tree - C# 구현","mainEntityOfPage":{"@type":"WebPage","@id":"https://jheun66.github.io/posts/algorithm/red-black-tree/"},"url":"https://jheun66.github.io/posts/algorithm/red-black-tree/"}</script>
<!-- End Jekyll SEO tag -->


  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8954355499146518"
     crossorigin="anonymous"></script>
  <script async src="https://fundingchoicesmessages.google.com/i/pub-8954355499146518?ers=1" nonce="vIYNAgythFLTbocmvIWE6A"></script><script nonce="vIYNAgythFLTbocmvIWE6A">(function() {function signalGooglefcPresent() {if (!window.frames['googlefcPresent']) {if (document.body) {const iframe = document.createElement('iframe'); iframe.style = 'width: 0; height: 0; border: none; z-index: -1000; left: -1000px; top: -1000px;'; iframe.style.display = 'none'; iframe.name = 'googlefcPresent'; document.body.appendChild(iframe);} else {setTimeout(signalGooglefcPresent, 0);}}}signalGooglefcPresent();})();</script>
</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">In progress</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/about">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/category">Category</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->



<header class="masthead" style="background-color: #F72585;">

  <div class="overlay"></div>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <div class="post-heading">
          <h1>Red-Black Tree - C# 구현</h1>
          
          <span class="meta">Posted by Eun JongHyeok on April 28, 2024
          </span>
        </div>
      </div>
    </div>
  </div>
</header>

<div class="container">
  <div class="row min-vh-100 flex-column flex-lg-row">
    <div class="fixed-menu">
      <div class="fixed-menu-title">Algorithm 다른 글 보기</div>
      <ul>
        
        <li>
          <a href="/posts/algorithm/piece-table/">Piece Table - C# 구현</a>
        </li>
        
        <li>
          <a href="/posts/algorithm/red-black-tree/">Red-Black Tree - C# 구현</a>
        </li>
        
        <li>
          <a href="/posts/algorithm/next-permutation/">next_permutation - Java 구현</a>
        </li>
        
      </ul>
    </div>
    <div class="col-lg-8 col-md-10 mx-auto">
  
      <ol id="toc" class="table-of-contents">
<li class="toc-entry toc-h1"><a href="#결과">결과</a></li>
<li class="toc-entry toc-h1"><a href="#이진-탐색-트리">이진 탐색 트리</a>
<ol class="table-of-contents-sublist-class">
<li class="toc-entry toc-h2"><a href="#정의">정의</a></li>
<li class="toc-entry toc-h2"><a href="#최악의-경우">최악의 경우</a></li>
</ol>
</li>
<li class="toc-entry toc-h1"><a href="#red-black-tree">Red-Black Tree</a></li>
<li class="toc-entry toc-h1"><a href="#속성">속성</a></li>
<li class="toc-entry toc-h1"><a href="#c-구현">C# 구현</a>
<ol class="table-of-contents-sublist-class">
<li class="toc-entry toc-h2"><a href="#노드">노드</a></li>
<li class="toc-entry toc-h2"><a href="#operation">Operation</a></li>
<li class="toc-entry toc-h2"><a href="#노드-추가">노드 추가</a></li>
</ol>
</li>
<li class="toc-entry toc-h1"><a href="#유니티에서-구현시-주의-사항">유니티에서 구현시 주의 사항</a></li>
</ol><h1 id="결과">
<a class="anchor" href="#%EA%B2%B0%EA%B3%BC" aria-hidden="true"><span class="octicon octicon-link"></span></a>결과</h1>
<p>결과 미리보기입니다.😆</p>
<div class="row">
    <div class="col-12 mx-auto">
        <div class="game-area">
            <div class="red-button"></div>
            <div class="orange-button"></div>
            <div class="green-button"></div>
            <iframe id="game-iframe" src="/UnityGame/index.html?scene=RBTScene"></iframe>
        </div>
    </div>
</div>
<script type="text/javascript">
    document.querySelector('.red-button').addEventListener('click', function() {
        var iframe = document.getElementById('game-iframe');
        iframe.src = iframe.src;
    });
</script>

<p>VS Code에서 내부적으로 Red Black Tree를 사용하고 있습니다. Text Editor 개발에 앞서 개념 이해와 제네릭한 구현을 먼저 진행합니다.<br>
관심이 있으시면 한번 아래 링크를 클릭 해보세요.🥺<br>
<a href="/posts/unity/challenging-projects-every-programmer-should-try-text-editor-3/">Challenging projects every programmer should try - Text Editor(3)</a></p>

<h1 id="이진-탐색-트리">
<a class="anchor" href="#%EC%9D%B4%EC%A7%84-%ED%83%90%EC%83%89-%ED%8A%B8%EB%A6%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>이진 탐색 트리</h1>
<p>정말 오랜만에 자료구조 공부를 하게되어 어디서부터 접근해야할지 고민이 되었는데요.<br>
트리라는 자료구조에 대해 안다고 생각하고 이진 탐색 트리부터 설명을 하겠습니다.</p>

<h2 id="정의">
<a class="anchor" href="#%EC%A0%95%EC%9D%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>정의</h2>
<p><img src="/img/posts/algorithm/001.svg" alt="001" width="450" class="center"></p>

<ul>
  <li>각 노드에 값이 있다.</li>
  <li>값들은 전순서가 있다.</li>
  <li>노드의 왼쪽 서브트리에는 그 노드의 값보다 작은 값들을 지닌 노드들로 이루어져 있다.</li>
  <li>노드의 오른쪽 서브트리에는 그 노드의 값보다 큰 값들을 지닌 노드들로 이루어져 있다.</li>
  <li>좌우 하위 트리는 각각이 다시 이진 탐색 트리여야 한다.</li>
</ul>

<p>출처 - <a href="https://ko.wikipedia.org/wiki/%EC%9D%B4%EC%A7%84_%ED%83%90%EC%83%89_%ED%8A%B8%EB%A6%AC">위키백과</a></p>

<p>탐색 트리라고 해봤자 별 다른 내용이 있는게 아니라 부모 노드의 오른쪽 노드는 부모 노드보다 큰 값, 왼쪽 노드는 부모 노드보다 작은 값이 들어 있어<br>
특정 값을 찾을 때 최선의 경우 예를들어 균형 트리나, 완전 이진 트리 같은 경우 O(log n)의 성능을 가집니다.</p>

<h2 id="최악의-경우">
<a class="anchor" href="#%EC%B5%9C%EC%95%85%EC%9D%98-%EA%B2%BD%EC%9A%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>최악의 경우</h2>
<p>트리 모양이 1자로 된 경우와 같이 최악의 경우에는 O(n)의 성능을 가집니다.</p>

<p>이러한 최악의 경우를 방지하기 위해 트리에서 추가나 제거시 자체적으로 밸런스를 유지하도록 구현할 수 있는데 이를 <code class="language-plaintext highlighter-rouge">Self-balancing binary search tree</code>라 합니다. 이러한 구현체 중 하나로 Red-Black Tree가 있습니다.</p>

<h1 id="red-black-tree">
<a class="anchor" href="#red-black-tree" aria-hidden="true"><span class="octicon octicon-link"></span></a>Red-Black Tree</h1>
<h1 id="속성">
<a class="anchor" href="#%EC%86%8D%EC%84%B1" aria-hidden="true"><span class="octicon octicon-link"></span></a>속성</h1>
<p><img src="/img/posts/algorithm/002.svg" alt="002" width="450" class="center"></p>

<p>Red-Black Tree는 위에서 정의한 조건에 추가적인 조건이 추가됩니다.</p>

<ol>
  <li>노드는 레드 혹은 블랙 중의 하나이다.</li>
  <li>모든 리프 노드들(NIL)은 블랙이다.</li>
  <li>레드 노드의 자식노드 양쪽은 언제나 모두 블랙이다. (즉, 레드 노드는 연달아 나타날 수 없으며, 블랙 노드만이 레드 노드의 부모 노드가 될 수 있다)</li>
  <li>어떤 노드로부터 시작되어 그에 속한 하위 리프 노드에 도달하는 모든 경로에는 리프 노드를 제외하면 모두 같은 개수의 블랙 노드가 있다.</li>
  <li>(결론) 노드 N이 정확히 하나의 자식을 가지고 있다면, 그 자식은 빨간색이어야 합니다. 만약 그 자식이 검은색이라면, 그 NIL 후손들은 N의 NIL 자식과 다른 검은 깊이에 위치하게 되어 규칙 4를 위반하게 됩니다.</li>
</ol>

<p>이 속성에 대해서 영어 문서와 한글 문서가 다르게 되어 있습니다.<br>
한글 문서에서는 “2번에 루트 노드는 블랙이다.”로 되어 있는데 영어 문선에서는 이러한 말이 따로 없습니다.
영어 출처 - <a href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree">위키백과</a><br>
한국어 출처 - <a href="https://ko.wikipedia.org/wiki/%EB%A0%88%EB%93%9C-%EB%B8%94%EB%9E%99_%ED%8A%B8%EB%A6%AC">위키백과</a><br>
이 차이는 루트 노드만 존재할 때 차이가 있습니다.<br>
저는 영어 문서 기준으로 구현을 진행하도록 하겠습니다.</p>

<blockquote>
  <p>Some authors, e.g. Cormen &amp; al.,[18] claim “the root is black” as fifth requirement
but not Mehlhorn &amp; Sanders[17] or Sedgewick &amp; Wayne.[16]: 432–447  Since the root
can always be changed from red to black, this rule has little effect on analysis.
This article also omits it, because it slightly disturbs the recursive algorithms and proofs.</p>
</blockquote>

<p>제 블로그뿐만 아니라 다른 블로그도 같이 보시는 분들은 주의해주세요!</p>

<h1 id="c-구현">
<a class="anchor" href="#c-%EA%B5%AC%ED%98%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>C# 구현</h1>
<p>위키를 참고하여 작성하였습니다. C#으로 goto 문을 사용하지 않고 구현해보았습니다.<br>
수정이 필요한 부분이 보이면 말씀 부탁드립니다.😐</p>

<h2 id="노드">
<a class="anchor" href="#%EB%85%B8%EB%93%9C" aria-hidden="true"><span class="octicon octicon-link"></span></a>노드</h2>
<p>다양하게 확장해서 사용하기 위해 Generic Class로 구현하였습니다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
</pre></td>
<td class="rouge-code"><pre><span class="k">public</span> <span class="k">static</span> <span class="k">class</span> <span class="nc">Constants</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">LEFT</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">RED</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">RIGHT</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
    <span class="k">public</span> <span class="k">static</span> <span class="k">readonly</span> <span class="kt">int</span> <span class="n">BLACK</span> <span class="p">=</span> <span class="m">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">public</span> <span class="k">class</span> <span class="nc">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="k">where</span> <span class="n">T</span> <span class="p">:</span> <span class="n">IComparable</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">Parent</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;[]</span> <span class="n">Child</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="kt">int</span> <span class="n">Color</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="k">public</span> <span class="n">T</span> <span class="n">Value</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

    <span class="k">public</span> <span class="nf">Node</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="n">Child</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;[</span><span class="m">2</span><span class="p">];</span>
        <span class="n">Color</span> <span class="p">=</span> <span class="n">RED</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">Left</span>
    <span class="p">{</span>
        <span class="k">get</span> 
        <span class="p">{</span> 
            <span class="k">return</span> <span class="n">Child</span><span class="p">[</span><span class="n">LEFT</span><span class="p">];</span> 
        <span class="p">}</span>
        <span class="k">set</span> 
        <span class="p">{</span>
            <span class="n">Child</span><span class="p">[</span><span class="n">LEFT</span><span class="p">]</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span> 
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">Right</span>
    <span class="p">{</span>
        <span class="k">get</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="n">Child</span><span class="p">[</span><span class="n">RIGHT</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">set</span>
        <span class="p">{</span>
            <span class="n">Child</span><span class="p">[</span><span class="n">RIGHT</span><span class="p">]</span> <span class="p">=</span> <span class="k">value</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">public</span> <span class="k">void</span> <span class="nf">SwapValue</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">node</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="p">(</span><span class="n">Value</span><span class="p">,</span> <span class="n">node</span><span class="p">.</span><span class="n">Value</span><span class="p">)</span> <span class="p">=</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Value</span><span class="p">,</span> <span class="n">Value</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td>
</tr></tbody></table></code></pre></div></div>

<h2 id="operation">
<a class="anchor" href="#operation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Operation</h2>
<p>추가와 삭제 구현을 하기전에 일부 동작들을 미리 구현해줍니다.</p>

<h3 id="회전">회전</h3>
<p><img src="/img/posts/algorithm/003.gif" alt="003" width="300" class="center">
By Nomen4Omen - <span class="int-own-work" lang="en">Own work</span>, <a href="https://creativecommons.org/licenses/by-sa/3.0/de/deed.en" title="Creative Commons Attribution-Share Alike 3.0 de">CC BY-SA 3.0 de</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=36774159">Link</a></p>

<p>회전 동작을 먼저 구현하여 이후 추가나 삭제 동작에서 사용할 수 있습니다.
하나의 함수로 만들 수 있습니다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
</pre></td>
<td class="rouge-code"><pre><span class="c1">/// &lt;summary&gt;</span>
<span class="c1">/// 회전</span>
<span class="c1">/// &lt;para&gt;</span>
<span class="c1">/// https://en.wikipedia.org/wiki/Red%E2%80%93black_tree</span>
<span class="c1">/// &lt;/para&gt;</span>
<span class="c1">/// &lt;/summary&gt;</span>
<span class="c1">/// &lt;param name="x"&gt;서브 트리의 루트 노드&lt;/param&gt;</span>
<span class="c1">/// &lt;param name="dir"&gt;회전 방향&lt;/param&gt;</span>
<span class="k">private</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="nf">Rotate</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">exRoot</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">parent</span> <span class="p">=</span> <span class="n">exRoot</span><span class="p">.</span><span class="n">Parent</span><span class="p">;</span>
    <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">newRoot</span> <span class="p">=</span> <span class="n">exRoot</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">];</span>

    <span class="c1">// 새 루트 노드가 없으면 회전 X</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">newRoot</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span> <span class="n">exRoot</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 자식 교환</span>
    <span class="n">exRoot</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">]</span> <span class="p">=</span> <span class="n">newRoot</span><span class="p">?.</span><span class="n">Child</span><span class="p">[</span><span class="n">dir</span><span class="p">];</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">exRoot</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">]</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">exRoot</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">].</span><span class="n">Parent</span> <span class="p">=</span> <span class="n">exRoot</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// 루트 변경</span>
    <span class="n">newRoot</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">dir</span><span class="p">]</span> <span class="p">=</span> <span class="n">exRoot</span><span class="p">;</span>
    <span class="n">exRoot</span><span class="p">.</span><span class="n">Parent</span> <span class="p">=</span> <span class="n">newRoot</span><span class="p">;</span>

    <span class="c1">// 서브 트리의 부모 노드와 연결</span>
    <span class="n">newRoot</span><span class="p">.</span><span class="n">Parent</span> <span class="p">=</span> <span class="n">parent</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">parent</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">parent</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">exRoot</span> <span class="p">==</span> <span class="n">parent</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">dir</span><span class="p">]</span> <span class="p">?</span> <span class="n">dir</span> <span class="p">:</span> <span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">]</span> <span class="p">=</span> <span class="n">newRoot</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Root</span> <span class="p">=</span> <span class="n">newRoot</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="n">newRoot</span><span class="p">;</span>
<span class="p">}</span>

</pre></td>
</tr></tbody></table></code></pre></div></div>
<h3 id="가장-왼쪽에-있는-자식-노드-찾기">가장 왼쪽에 있는 자식 노드 찾기</h3>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="nf">GetLeftmostChild</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">node</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Left</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">node</span><span class="p">;</span>
    <span class="k">else</span>
        <span class="k">return</span> <span class="nf">GetLeftmostChild</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Left</span><span class="p">);</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<h3 id="노드-검색">노드 검색</h3>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre></td>
<td class="rouge-code"><pre><span class="k">private</span> <span class="kt">bool</span> <span class="nf">Search</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">node</span><span class="p">,</span> <span class="n">T</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">found</span><span class="p">,</span> <span class="k">out</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">parent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Value</span><span class="p">.</span><span class="nf">CompareTo</span><span class="p">(</span><span class="k">value</span><span class="p">)</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">found</span> <span class="p">=</span> <span class="n">node</span><span class="p">;</span>
        <span class="n">parent</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">Parent</span><span class="p">;</span>
        <span class="k">return</span> <span class="k">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Value</span><span class="p">.</span><span class="nf">CompareTo</span><span class="p">(</span><span class="k">value</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Left</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">found</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
            <span class="n">parent</span> <span class="p">=</span> <span class="n">node</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nf">Search</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Left</span><span class="p">,</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="n">found</span><span class="p">,</span> <span class="k">out</span> <span class="n">parent</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Right</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">found</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
            <span class="n">parent</span> <span class="p">=</span> <span class="n">node</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="nf">Search</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Right</span><span class="p">,</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="n">found</span><span class="p">,</span> <span class="k">out</span> <span class="n">parent</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td>
</tr></tbody></table></code></pre></div></div>

<h2 id="노드-추가">
<a class="anchor" href="#%EB%85%B8%EB%93%9C-%EC%B6%94%EA%B0%80" aria-hidden="true"><span class="octicon octicon-link"></span></a>노드 추가</h2>
<p><img src="/img/posts/algorithm/004.png" alt="004" width="450" class="center">
출처 - <a href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree">위키백과</a></p>

<p>위의 표를 통해 아래와 같이 구현할 수 있습니다.</p>
<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
</pre></td>
<td class="rouge-code"><pre><span class="k">public</span> <span class="k">void</span> <span class="nf">Insert</span><span class="p">(</span><span class="n">T</span> <span class="k">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Root</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">node</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> 
        <span class="p">{</span> 
            <span class="n">Value</span> <span class="p">=</span> <span class="k">value</span>
        <span class="p">};</span>
        <span class="n">Root</span> <span class="p">=</span> <span class="n">node</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nf">Search</span><span class="p">(</span><span class="n">Root</span><span class="p">,</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="n">_</span><span class="p">,</span> <span class="k">out</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">parent</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="c1">// 중복</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">node</span> <span class="p">=</span> <span class="k">new</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span>
        <span class="p">{</span>
            <span class="n">Value</span> <span class="p">=</span> <span class="k">value</span>
        <span class="p">};</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">Value</span><span class="p">.</span><span class="nf">CompareTo</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Value</span><span class="p">)</span> <span class="p">&gt;</span> <span class="m">0</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">node</span><span class="p">.</span><span class="n">Parent</span> <span class="p">=</span> <span class="n">parent</span><span class="p">;</span>
            <span class="n">parent</span><span class="p">.</span><span class="n">Left</span> <span class="p">=</span> <span class="n">node</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="n">node</span><span class="p">.</span><span class="n">Parent</span> <span class="p">=</span> <span class="n">parent</span><span class="p">;</span>
            <span class="n">parent</span><span class="p">.</span><span class="n">Right</span> <span class="p">=</span> <span class="n">node</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="nf">RebalanceAfterInsertion</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">node</span><span class="p">.</span><span class="n">Parent</span><span class="p">);</span>

        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">RebalanceAfterInsertion</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">node</span><span class="p">,</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">parent</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// case 1</span>
    <span class="c1">// parent is black</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">BLACK</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">grandparent</span> <span class="p">=</span> <span class="n">parent</span><span class="p">.</span><span class="n">Parent</span><span class="p">;</span>
        <span class="c1">// case 4</span>
        <span class="c1">// parent is root</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">grandparent</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">parent</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">var</span> <span class="n">dir</span> <span class="p">=</span> <span class="n">grandparent</span><span class="p">.</span><span class="n">Left</span> <span class="p">==</span> <span class="n">parent</span> <span class="p">?</span> <span class="n">LEFT</span> <span class="p">:</span> <span class="n">RIGHT</span><span class="p">;</span>
        <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">uncle</span> <span class="p">=</span> <span class="n">grandparent</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">];</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">uncle</span> <span class="p">==</span> <span class="k">null</span> <span class="p">||</span> <span class="n">uncle</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">BLACK</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="c1">// case 5</span>
            <span class="c1">// inner grandchild</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">node</span> <span class="p">==</span> <span class="n">parent</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">])</span>
            <span class="p">{</span>
                <span class="nf">Rotate</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
                <span class="n">node</span> <span class="p">=</span> <span class="n">parent</span><span class="p">;</span>
                <span class="n">parent</span> <span class="p">=</span> <span class="n">grandparent</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">dir</span><span class="p">];</span>
                <span class="c1">// fall through to case 6</span>
            <span class="p">}</span>
            <span class="c1">// case 6</span>
            <span class="c1">// outer grandchild</span>
            <span class="nf">Rotate</span><span class="p">(</span><span class="n">grandparent</span><span class="p">,</span> <span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">);</span>
            <span class="n">parent</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
            <span class="n">grandparent</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">RED</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// case 2</span>
        <span class="n">parent</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
        <span class="n">uncle</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
        <span class="n">grandparent</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">RED</span><span class="p">;</span>
        <span class="n">node</span> <span class="p">=</span> <span class="n">grandparent</span><span class="p">;</span>

        <span class="kt">var</span> <span class="n">newParent</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">Parent</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">newParent</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="nf">RebalanceAfterInsertion</span><span class="p">(</span><span class="n">node</span><span class="p">,</span> <span class="n">newParent</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="c1">// case 3</span>
        <span class="c1">// n is root and red</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td>
</tr></tbody></table></code></pre></div></div>

<h3 id="노드-삭제">노드 삭제</h3>
<p><img src="/img/posts/algorithm/005.png" alt="005" width="450" class="center">
출처 - <a href="https://en.wikipedia.org/wiki/Red%E2%80%93black_tree">위키백과</a></p>

<p>위의 표를 통해 아래와 같이 구현할 수 있습니다.<br>
영어 주석들은 위키에서 참고한 문구를 가리킵니다.</p>

<div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr>
<td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
</pre></td>
<td class="rouge-code"><pre><span class="k">public</span> <span class="k">void</span> <span class="nf">Delete</span><span class="p">(</span><span class="n">T</span> <span class="k">value</span><span class="p">)</span>
<span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">Root</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="p">(</span><span class="nf">Search</span><span class="p">(</span><span class="n">Root</span><span class="p">,</span> <span class="k">value</span><span class="p">,</span> <span class="k">out</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">found</span><span class="p">,</span> <span class="k">out</span> <span class="n">_</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="nf">DeleteNode</span><span class="p">(</span><span class="n">found</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">DeleteNode</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">node</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// When the deleted node has 2 children (non-NIL), </span>
    <span class="c1">// then we can swap its value with its in-order successor (the leftmost child of the right subtree), </span>
    <span class="c1">// and then delete the successor instead. </span>
    <span class="c1">// Since the successor is leftmost, it can only have a right child (non-NIL) or no child at all.</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Left</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">node</span><span class="p">.</span><span class="n">Right</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">leftmostChild</span> <span class="p">=</span> <span class="nf">GetLeftmostChild</span><span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Right</span><span class="p">);</span>
        <span class="n">node</span><span class="p">.</span><span class="nf">SwapValue</span><span class="p">(</span><span class="n">leftmostChild</span><span class="p">);</span>
        <span class="nf">DeleteNode</span><span class="p">(</span><span class="n">leftmostChild</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Left</span> <span class="p">==</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">node</span><span class="p">.</span><span class="n">Right</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="kt">var</span> <span class="n">parent</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">Parent</span><span class="p">;</span>
        <span class="c1">// When the deleted node has no children (both NIL) and is the root, </span>
        <span class="c1">// replace it with NIL. The tree is empty.</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">parent</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Root</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// When the deleted node has no children (both NIL), and is red, </span>
        <span class="c1">// simply remove the leaf node.</span>
        <span class="kt">var</span> <span class="n">dir</span> <span class="p">=</span> <span class="n">parent</span><span class="p">.</span><span class="n">Left</span> <span class="p">==</span> <span class="n">node</span> <span class="p">?</span> <span class="n">LEFT</span> <span class="p">:</span> <span class="n">RIGHT</span><span class="p">;</span>
        <span class="n">parent</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">dir</span><span class="p">]</span> <span class="p">=</span> <span class="k">null</span><span class="p">;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">RED</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">return</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="c1">// When the deleted node has no children (both NIL), and is black, </span>
        <span class="c1">// deleting it will create an imbalance, and requires a fixup, as covered in the next section.</span>
        <span class="nf">DeleteWhileLooping</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="c1">// When the deleted node has only 1 child (non-NIL). In this case, </span>
        <span class="c1">// just replace the node with its child, and color it black.</span>
        <span class="c1">// The single child(non - NIL) must be red according to conclusion 5, </span>
        <span class="c1">// and the deleted node must be black according to requirement 3.</span>

        <span class="kt">var</span> <span class="n">childDir</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">Left</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">?</span> <span class="n">LEFT</span> <span class="p">:</span> <span class="n">RIGHT</span><span class="p">;</span>
        <span class="n">node</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">childDir</span><span class="p">].</span><span class="n">Parent</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">Parent</span><span class="p">;</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">node</span><span class="p">.</span><span class="n">Parent</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Root</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">childDir</span><span class="p">];</span>
        <span class="p">}</span>
        <span class="k">else</span>
        <span class="p">{</span>
            <span class="kt">var</span> <span class="n">parentDir</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">Parent</span><span class="p">.</span><span class="n">Left</span> <span class="p">==</span> <span class="n">node</span> <span class="p">?</span> <span class="n">LEFT</span> <span class="p">:</span> <span class="n">RIGHT</span><span class="p">;</span>
            <span class="n">node</span><span class="p">.</span><span class="n">Parent</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">parentDir</span><span class="p">]</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">childDir</span><span class="p">];</span>
        <span class="p">}</span>

        <span class="n">node</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">childDir</span><span class="p">].</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">DeleteWhileLooping</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">parent</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">)</span>
<span class="p">{</span>
    <span class="c1">// case 1</span>
    <span class="c1">// 코드 상으로만 존재??</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">parent</span> <span class="p">==</span> <span class="k">null</span><span class="p">)</span>
        <span class="k">return</span><span class="p">;</span>

    <span class="c1">// S cannot be a NIL node in the first iteration, </span>
    <span class="c1">// because it must have black height one, which was the black height of N before its deletion, </span>
    <span class="c1">// but C and D may be NIL nodes</span>
    <span class="kt">var</span> <span class="n">sibling</span> <span class="p">=</span> <span class="n">parent</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">];</span>
    <span class="kt">var</span> <span class="n">distantNephew</span> <span class="p">=</span> <span class="n">sibling</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">];</span>
    <span class="kt">var</span> <span class="n">closeNephew</span> <span class="p">=</span> <span class="n">sibling</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">dir</span><span class="p">];</span>

    <span class="c1">// case 3</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">sibling</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">RED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">D3</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">closeNephew</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// case 6</span>
    <span class="c1">// D red &amp;&amp; S black:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">distantNephew</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">distantNephew</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">RED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">D6</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">distantNephew</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// case 5</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">closeNephew</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">closeNephew</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">RED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">D5</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">closeNephew</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// case 4</span>
    <span class="c1">// P red &amp;&amp; S+C+D black:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">RED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">D4</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// case 2</span>
    <span class="c1">// Case_D2 (P+C+S+D black):</span>
    <span class="n">sibling</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">RED</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">node</span> <span class="p">=</span> <span class="n">parent</span><span class="p">;</span>
    <span class="n">parent</span> <span class="p">=</span> <span class="n">node</span><span class="p">.</span><span class="n">Parent</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">parent</span> <span class="p">!=</span> <span class="k">null</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">dir</span> <span class="p">=</span> <span class="n">parent</span><span class="p">.</span><span class="n">Left</span> <span class="p">==</span> <span class="n">node</span> <span class="p">?</span> <span class="n">LEFT</span> <span class="p">:</span> <span class="n">RIGHT</span><span class="p">;</span>
        <span class="nf">DeleteWhileLooping</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">D3</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">parent</span><span class="p">,</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">closeNephew</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">Rotate</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
    <span class="n">parent</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">RED</span><span class="p">;</span>
    <span class="n">sibling</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
    <span class="n">sibling</span> <span class="p">=</span> <span class="n">closeNephew</span><span class="p">;</span> <span class="c1">// != NIL</span>
    <span class="c1">// now: P red &amp;&amp; S black</span>
    <span class="kt">var</span> <span class="n">distantNephew</span> <span class="p">=</span> <span class="n">sibling</span><span class="p">!.</span><span class="n">Child</span><span class="p">[</span><span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">];</span> <span class="c1">// distant nephew</span>

    <span class="c1">// case 6</span>
    <span class="c1">// D red &amp;&amp; S black:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">distantNephew</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">distantNephew</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">RED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">D6</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">distantNephew</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="n">closeNephew</span> <span class="p">=</span> <span class="n">sibling</span><span class="p">.</span><span class="n">Child</span><span class="p">[</span><span class="n">dir</span><span class="p">];</span> <span class="c1">// close nephew</span>
    <span class="c1">// case 5</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">closeNephew</span> <span class="p">!=</span> <span class="k">null</span> <span class="p">&amp;&amp;</span> <span class="n">closeNephew</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">RED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">D5</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">closeNephew</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">// Otherwise C+D considered black.</span>
    <span class="c1">// fall through to Case_D4</span>
    <span class="c1">// case 4</span>
    <span class="c1">// P red &amp;&amp; S+C+D black:</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">parent</span><span class="p">.</span><span class="n">Color</span> <span class="p">==</span> <span class="n">RED</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="nf">D4</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">);</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">D6</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">parent</span><span class="p">,</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">distantNephew</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">Rotate</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
    <span class="n">sibling</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">parent</span><span class="p">.</span><span class="n">Color</span><span class="p">;</span>
    <span class="n">parent</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
    <span class="n">distantNephew</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">D5</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">parent</span><span class="p">,</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">closeNephew</span><span class="p">,</span> <span class="kt">int</span> <span class="n">dir</span><span class="p">)</span>
<span class="p">{</span>
    <span class="nf">Rotate</span><span class="p">(</span><span class="n">sibling</span><span class="p">,</span> <span class="m">1</span> <span class="p">-</span> <span class="n">dir</span><span class="p">);</span>
    <span class="n">sibling</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">RED</span><span class="p">;</span>
    <span class="n">closeNephew</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
    <span class="kt">var</span> <span class="n">distantNephew</span> <span class="p">=</span> <span class="n">sibling</span><span class="p">;</span>
    <span class="n">sibling</span> <span class="p">=</span> <span class="n">closeNephew</span><span class="p">;</span>
    <span class="c1">// now: D red &amp;&amp; S black</span>
    <span class="c1">// fall through to Case_D6</span>
    <span class="nf">D6</span><span class="p">(</span><span class="n">parent</span><span class="p">,</span> <span class="n">sibling</span><span class="p">,</span> <span class="n">distantNephew</span><span class="p">,</span> <span class="n">dir</span><span class="p">);</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">private</span> <span class="k">void</span> <span class="nf">D4</span><span class="p">(</span><span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">parent</span><span class="p">,</span> <span class="n">Node</span><span class="p">&lt;</span><span class="n">T</span><span class="p">&gt;</span> <span class="n">sibling</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">sibling</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">RED</span><span class="p">;</span>
    <span class="n">parent</span><span class="p">.</span><span class="n">Color</span> <span class="p">=</span> <span class="n">BLACK</span><span class="p">;</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>

</pre></td>
</tr></tbody></table></code></pre></div></div>
<h1 id="유니티에서-구현시-주의-사항">
<a class="anchor" href="#%EC%9C%A0%EB%8B%88%ED%8B%B0%EC%97%90%EC%84%9C-%EA%B5%AC%ED%98%84%EC%8B%9C-%EC%A3%BC%EC%9D%98-%EC%82%AC%ED%95%AD" aria-hidden="true"><span class="octicon octicon-link"></span></a>유니티에서 구현시 주의 사항</h1>
<p>유니티에서는 MonoBehaviour를 상속 받는 클래스는 Generic 클래스로 사용할 수 없습니다.<br>
따라서 Wrapping을 하던가 타입을 정해서 사용해주어야 합니다.</p>

<p>최종 결과는 페이지 맨 위에 있습니다.😆<br>
<a href="#%EA%B2%B0%EA%B3%BC">결과</a></p>


      <hr>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>Red-Black_Tree</div>
      
      
        <div class="tag-class"><i class="fa fa-tag"></i>BST</div>
      

      <hr>

      <!-- 다음 포스트, 이전 포스트 카테고리별로 정리 -->
      

      
      

      
      <a class="btn btn-gray float-left" href="/posts/algorithm/next-permutation/" data-toggle="tooltip" data-placement="top" title="next_permutation - Java 구현">&larr; Previous<span class="d-none d-md-inline">
          Post</span></a>
      
      
      <a class="btn btn-gray float-right" href="/posts/algorithm/piece-table/" data-toggle="tooltip" data-placement="top" title="Piece Table - C# 구현">Next<span class="d-none d-md-inline">
          Post</span> &rarr;</a>
      

      
      <div id="disqus_thread"></div>
      <script>
          /**
          *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
          *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables    */
          
          var disqus_config = function () {
          this.page.url = 'https://jheun66.github.io/posts/algorithm/red-black-tree/';  // Replace PAGE_URL with your page's canonical URL variable
          this.page.identifier = '/posts/algorithm/red-black-tree/'; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
          };
          
          (function() { // DON'T EDIT BELOW THIS LINE
          var d = document, s = d.createElement('script');
          s.src = 'https://jheun66.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
          })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      

    </div>
  </div>
</div>

  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:jheun5@naver.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/amos55606241">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://www.facebook.com/amos.eun.73">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/jheun66">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://instagram.com/jheun66">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-instagram fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; Eun JongHyeok 2025</p>
      </div>
    </div>
  </div>
</footer>


  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/scripts.js"></script>

<script src="/assets/scripts.js"></script>


  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-T1H0RYSGS7"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-T1H0RYSGS7');
</script>



  <style>
.videoWrapper {
    position: relative;
    padding-bottom: 56.333%;
    height: 0;
    background: black;
}
.videoWrapper iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}    
</style>

<script>
function get_youtube_id(url) {
    var p = /^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/;
    return (url.match(p)) ? RegExp.$1 : false;
}
function vimeo_embed(url,el) {
    var id = false;
    $.ajax({
        url: 'https://vimeo.com/api/oembed.json?url='+url,
        async: true,
        success: function(response) {
        if(response.video_id) {
            id = response.video_id;
            if(url.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
            if(url.indexOf('loop=1') !== -1) var loop=1; else var loop=0;
            var theInnerHTML = '<div class="videoWrapper"><iframe src="https://player.vimeo.com/video/'+id+'/?byline=0&title=0&portrait=0';
            if(autoplay==1) theInnerHTML += '&autoplay=1';
            if(loop==1) theInnerHTML += '&loop=1';
            theInnerHTML += '" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe></div>'; 
            el.innerHTML = theInnerHTML;
        }
        }
    });
}
function video_embed() {
    var p = document.getElementsByTagName('p');
    for(var i = 0; i < p.length; i++) {
        //check if this is an external url (that starts with https:// or http://
        if (p[i].innerHTML.indexOf("http://") == 0 ||
            p[i].innerHTML.indexOf("https://") == 0) {
            var youtube_id = get_youtube_id(p[i].innerHTML);
            if(youtube_id) {
                if(p[i].innerHTML.indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
                if(p[i].innerHTML.indexOf('loop=1') !== -1) var loop=1; else var loop=0;
                var theInnerHTML = '<div class="videoWrapper"><iframe width="720" height="420" src="https://www.youtube.com/embed/' + youtube_id + '?rel=0&showinfo=0';
                if(autoplay==1) theInnerHTML += '&autoplay=1';
                if(loop==1) theInnerHTML += '&loop=1&playlist='+youtube_id+'&version=3';
                if(p[i].innerHTML.indexOf('start=') !== -1) theInnerHTML += '&start='+p[i].innerHTML.substring(p[i].innerHTML.indexOf('start=')+6);
                theInnerHTML += '" frameborder="0" allowfullscreen></iframe></div>';
                p[i].innerHTML = theInnerHTML;
            }
            if(p[i].innerHTML.indexOf('vimeo.com') !== -1) {
                //ask vimeo for the id and place the embed
                vimeo_embed(p[i].innerHTML,p[i]);
            }
        }
    }
}
video_embed();

function mp3_embed() {
    var p = document.getElementsByTagName('p');
    for(var i = 0; i < p.length; i++) {
        if(p[i].innerHTML.indexOf('.mp3') !== -1) {
            var str = p[i].innerHTML.split('?');
            if(str.length == 1) str[1] = '';
            var str1 = str[1];
            str1 = str1.replace('&','').replace('&','');
            str1 = str1.replace('autoplay=1','').replace('autoplay=0','');
            str1 = str1.replace('loop=1','').replace('loop=0','');
            str1 = str1.replace('controls=0','').replace('controls=1','');

            if (str[0].lastIndexOf('.mp3', str[0].length - 4) === str[0].length - 4 && str1.length == 0) {
                if(str[1].indexOf('autoplay=1') !== -1) var autoplay=1; else var autoplay=0;
                if(str[1].indexOf('loop=1') !== -1) var loop=1; else var loop=0;
                if(str[1].indexOf('controls=0') !== -1) var controls=0; else var controls=1;
                var newInnerHTML = '<audio';
                if(autoplay==1) newInnerHTML += ' autoplay';
                if(loop==1) newInnerHTML += ' loop';
                if(controls==1) newInnerHTML += ' controls';
                newInnerHTML += '><source src="'+str[0]+'" type="audio/mpeg">Your browser does not support the audio element.</audio>';
                p[i].innerHTML = newInnerHTML;
            }
        }
    }
}
mp3_embed();
</script>
  
  <script id="dsq-count-scr" src="//jheun66.disqus.com/count.js" async></script>
  
</body>

</html>
